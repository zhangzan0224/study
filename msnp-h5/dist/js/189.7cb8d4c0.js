"use strict";(self["webpackChunkmsnp_h5"]=self["webpackChunkmsnp_h5"]||[]).push([[189],{2557:function(e,a,t){e.exports=t.p+"img/empty-state.182cf522.png"},7487:function(e,a,t){t.d(a,{A:function(){return u}});var s=t(6768),i=t(4232);const l={class:"empty-state"},d=["src"],n={class:"empty-text"};function o(e,a,t,o,c,v){return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("img",{src:t.imageUrl,alt:"暂无内容",class:"empty-image"},null,8,d),(0,s.Lk)("span",n,(0,i.v_)(t.text),1)])}var c={name:"EmptyState",props:{text:{type:String,default:"暂无内容"},imageUrl:{type:String,default:t(2557)}}},v=t(1241);const r=(0,v.A)(c,[["render",o],["__scopeId","data-v-7bb73e06"]]);var u=r},7648:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEqADAAQAAAABAAAAEgAAAACaqbJVAAABU0lEQVQ4Eb2SvUrEQBDHL8mSRnuvv0ItLYNapMonKoqtz+E76GNcdVhIIN9FrhFrQQttRHwAU4n5MPE/HAsheGcS5AY2Ozsz+8vM7IxG6xTP8yZBEJyt+qe4ysl9oijuCIIwi6Louq5rgdub+6/GZgDXKSPAplhOWZYXpmlm3Ed7ZxAFI6N9ZORAfSyK4sS27Q+yk/QC0QXf97dRqg/1C5kZlmW9kb1TjyiQi2EYz5IkKTh/Msbu4zjeI1/vjDgwDMMN6DOsw6qqjgaDCJgkCcvzfApV6V0aAVpCjGpwRshmM8uyG4yDgtKOB4Fc1x2j4R4gWxgHU9f1B6mV5p9HvNIunn+OwG8sFZAXutSrR5hueqE73HuVZflA07R3gpB0BmGqz1FKjFKCNE01VVXTBWLx7dQjzIyNcAeQK2RxCWDdhJDO2oYl5yfYT9GP2yX+/zP/AP5KdOzWRoXFAAAAAElFTkSuQmCC"},8536:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ue}});var s=t(6768);const i={class:"activity-detail-page"},l={class:"tab-content-container"},d={key:0,class:"tab-content"},n={key:1,class:"tab-content"},o={key:2,class:"tab-content"};function c(e,a,t,c,v,r){const u=(0,s.g2)("NavigationBar"),p=(0,s.g2)("TabsBar"),m=(0,s.g2)("ActivityInfo"),h=(0,s.g2)("FeedbackForm"),f=(0,s.g2)("AuditRecord");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(u,{title:"活动详情",onBack:r.handleBack},null,8,["onBack"]),(0,s.bF)(p,{items:v.tabItems,"active-status":v.activeTab,onStatusChange:r.handleTabChange},null,8,["items","active-status","onStatusChange"]),(0,s.Lk)("div",l,["info"===v.activeTab?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(m,{activity:v.activity,editable:v.infoEditable,onEdit:r.handleEditInfo,onSave:r.handleSaveInfo},null,8,["activity","editable","onEdit","onSave"])])):"feedback"===v.activeTab?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(h,{activity:v.activity,onSubmit:r.handleFeedbackSubmit},null,8,["activity","onSubmit"])])):"audit"===v.activeTab?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(f,{activity:v.activity},null,8,["activity"])])):(0,s.Q3)("",!0)])])}var v=t(1002),r=t(9020),u=(t(4114),t(144)),p=t(715),m=t(5312),h=t(5048);const f={class:"activity-info"},g={key:0,class:"expert-info-section"},b={key:0,class:"add-expert-wrapper"},k={key:1,class:"action-buttons"};var A={__name:"ActivityInfo",props:{activity:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["cancel","save"],setup(e,{emit:a}){const t=e,i=a,l=(0,u.KR)(null),d=(0,u.KR)({...t.activity}),n=(0,u.KR)({type:"select",placeholder:"请选择",disabled:!1}),o=(0,s.EW)(()=>{const e=d.value.content;return"健康讲座"===e||"义诊"===e});(0,s.wB)(()=>t.activity,e=>{d.value={...e},!o.value||d.value.experts&&0!==d.value.experts.length||y()},{deep:!0}),(0,s.wB)(()=>t.editable,e=>{e&&(d.value={...t.activity},!o.value||d.value.experts&&0!==d.value.experts.length||y())}),(0,s.sV)(()=>{!o.value||d.value.experts&&0!==d.value.experts.length||y()});const c=e=>{console.log("分公司已选择:",e),(0,p.GF)(`已选择分公司: ${e.text}`),d.value.department="",A(e.value)},v=e=>{console.log("分公司已变更，代码:",e)},r=()=>{console.log("分公司已清空"),d.value.department=""},A=async e=>{try{console.log(`正在加载分公司 ${e} 下的中支数据...`)}catch(a){console.error("加载中支数据失败:",a),(0,p.xr)("加载中支数据失败")}},y=()=>{d.value.experts||(d.value.experts=[]),0===d.value.experts.length&&d.value.experts.push({id:1,photo:"",name:"",title:"",hospital:"",department:"",introduction:""})},x=()=>{d.value.experts||(d.value.experts=[]);const e={id:Date.now(),photo:"",name:"",title:"",hospital:"",department:"",introduction:""};d.value.experts.push(e)},L=(e,a)=>{d.value.experts&&d.value.experts[e]&&(d.value.experts[e]={...d.value.experts[e],...a})},C=e=>{d.value.experts&&d.value.experts.length>1&&d.value.experts.splice(e,1)},S=()=>{d.value={...t.activity},i("cancel")},F=async()=>{try{await(l.value?.validate?.())}catch(e){const a=Array.isArray(e)?e[0]:null;return void(a&&a.message&&(0,p.xr)(a.message))}i("save",d.value)};return(a,t)=>((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(m.A,{ref_key:"activityBasicFormRef",ref:l,formData:d.value,"onUpdate:formData":t[0]||(t[0]=e=>d.value=e),editable:e.editable,"show-header":!0,"show-extended-fields":!0,"location-config":n.value,onBranchSelected:c,onBranchChanged:v,onBranchCleared:r},null,8,["formData","editable","location-config"]),o.value?((0,s.uX)(),(0,s.CE)("div",g,[t[1]||(t[1]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("span",{class:"section-title"},"讲师信息"),(0,s.Lk)("div",{class:"header-divider"})],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value.experts,(a,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"expert-section"},[(0,s.bF)(h.A,{expert:a,index:t,onUpdate:L,onRemove:C,"show-remove":e.editable&&d.value.experts&&d.value.experts.length>1},null,8,["expert","index","show-remove"])]))),128)),e.editable?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("span",{class:"add-expert-text",onClick:x},"+ 继续添加讲师")])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),e.editable?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("button",{class:"btn btn-cancel",onClick:S}," 取消 "),(0,s.Lk)("button",{class:"btn btn-save",onClick:F}," 保存 ")])):(0,s.Q3)("",!0)]))}},y=t(1241);const x=(0,y.A)(A,[["__scopeId","data-v-1f2533a6"]]);var L=x,C=t(4232),S=t(7648);const F={class:"feedback-form"},E={class:"activity-header-card"},w={class:"activity-title"},D={class:"data-section"},V={class:"signing-section"},I={class:"signing-options"},B={class:"evaluation-section"},X={class:"section-body"},_={class:"evaluation-items"},R={class:"evaluation-item"},q={class:"evaluation-item"},T={class:"evaluation-item"},U={class:"evaluation-item"},z={class:"total-score"},$={class:"score-value"},Q={class:"file-section"},M={class:"section-body"},N={class:"action-buttons"};function K(e,a,t,i,l,d){const n=(0,s.g2)("StarRating"),o=(0,s.g2)("FileUploader");return(0,s.uX)(),(0,s.CE)("div",F,[(0,s.Lk)("div",E,[a[9]||(a[9]=(0,s.Lk)("div",{class:"gradient-bar"},null,-1)),(0,s.Lk)("h3",w,(0,C.v_)(t.activity.name),1),a[10]||(a[10]=(0,s.Fv)('<div class="stats-section" data-v-6d1e44e0><div class="main-stat" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>62</span><span class="stat-label" data-v-6d1e44e0>签到反馈总人数</span></div><div class="sub-stats" data-v-6d1e44e0><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>36</span><span class="stat-label" data-v-6d1e44e0>签到客户人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>12</span><span class="stat-label" data-v-6d1e44e0>签到代理人人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>27</span><span class="stat-label" data-v-6d1e44e0>反馈客户人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>10</span><span class="stat-label" data-v-6d1e44e0>反馈代理人人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>16</span><span class="stat-label" data-v-6d1e44e0>签到反馈客户总数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>5</span><span class="stat-label" data-v-6d1e44e0>签到反馈代理人总数</span></div></div></div>',1))]),(0,s.Lk)("div",D,[a[12]||(a[12]=(0,s.Fv)('<div class="section-header" data-v-6d1e44e0><div class="section-title-group" data-v-6d1e44e0><span class="section-title" data-v-6d1e44e0>活动数据</span><span class="section-subtitle" data-v-6d1e44e0>数据将用于统计分析,请务必准确提供</span></div></div><div class="data-form" data-v-6d1e44e0><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><span class="item-label" data-v-6d1e44e0>报名人数(人)</span><span class="item-value" data-v-6d1e44e0>108</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><span class="item-label" data-v-6d1e44e0>现场实际客户人数(人)</span><span class="item-value placeholder" data-v-6d1e44e0>请输入</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><span class="item-label" data-v-6d1e44e0>现场实际代理人人数(人)</span><span class="item-value placeholder" data-v-6d1e44e0>请输入</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><div class="item-label-group" data-v-6d1e44e0><span class="required-asterisk" data-v-6d1e44e0>*</span><span class="item-label" data-v-6d1e44e0>现上参与人数(人)</span></div><span class="item-value" data-v-6d1e44e0>48</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><div class="item-label-group" data-v-6d1e44e0><span class="required-asterisk" data-v-6d1e44e0>*</span><span class="item-label" data-v-6d1e44e0>该活动是否录入其他系统</span></div><div class="select-group" data-v-6d1e44e0><span class="item-value placeholder" data-v-6d1e44e0>请选择</span><img src="'+S+'" alt="" class="select-icon" data-v-6d1e44e0></div></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><div class="item-label-group" data-v-6d1e44e0><span class="required-asterisk" data-v-6d1e44e0>*</span><span class="item-label" data-v-6d1e44e0>活动费用(元)</span></div><span class="item-value placeholder" data-v-6d1e44e0>请输入</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="textarea-field" data-v-6d1e44e0><span class="textarea-label" data-v-6d1e44e0>活动费用用途</span><div class="textarea-container" data-v-6d1e44e0><div class="textarea-content" data-v-6d1e44e0><span class="textarea-placeholder" data-v-6d1e44e0>请输入</span></div><div class="char-count" data-v-6d1e44e0>0/300</div></div></div><div class="item-divider" data-v-6d1e44e0></div></div></div>',2)),(0,s.Lk)("div",V,[a[11]||(a[11]=(0,s.Lk)("div",{class:"signing-label"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"label-text"},"是否现场签单")],-1)),(0,s.Lk)("div",I,[(0,s.Lk)("button",{class:(0,C.C4)(["option-btn",{active:!0===l.formData.onSiteSigning}]),onClick:a[0]||(a[0]=e=>l.formData.onSiteSigning=!0)}," 是 ",2),(0,s.Lk)("button",{class:(0,C.C4)(["option-btn",{active:!1===l.formData.onSiteSigning}]),onClick:a[1]||(a[1]=e=>l.formData.onSiteSigning=!1)}," 否 ",2)])])]),(0,s.Lk)("div",B,[a[19]||(a[19]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("div",{class:"section-title-group"},[(0,s.Lk)("span",{class:"section-title"},"活动评价"),(0,s.Lk)("span",{class:"section-subtitle"},"1-5分从差到优排序")])],-1)),(0,s.Lk)("div",X,[(0,s.Lk)("div",_,[(0,s.Lk)("div",R,[a[13]||(a[13]=(0,s.Lk)("div",{class:"evaluation-question"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"question-text"},"讲座内容设置是否符合听众的健康需求:")],-1)),(0,s.bF)(n,{modelValue:l.formData.evaluation.contentSuitability,"onUpdate:modelValue":a[2]||(a[2]=e=>l.formData.evaluation.contentSuitability=e)},null,8,["modelValue"])]),(0,s.Lk)("div",q,[a[14]||(a[14]=(0,s.Lk)("div",{class:"evaluation-question"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"question-text"},"专家演讲方式是否有效调动现场气氛:")],-1)),(0,s.bF)(n,{modelValue:l.formData.evaluation.presentationEffectiveness,"onUpdate:modelValue":a[3]||(a[3]=e=>l.formData.evaluation.presentationEffectiveness=e)},null,8,["modelValue"])]),(0,s.Lk)("div",T,[a[15]||(a[15]=(0,s.Lk)("div",{class:"evaluation-question"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"question-text"},"讲座内容是否符合主办单位的业务需求:")],-1)),(0,s.bF)(n,{modelValue:l.formData.evaluation.businessNeedAlignment,"onUpdate:modelValue":a[4]||(a[4]=e=>l.formData.evaluation.businessNeedAlignment=e)},null,8,["modelValue"])]),(0,s.Lk)("div",U,[a[16]||(a[16]=(0,s.Lk)("div",{class:"evaluation-question"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"question-text"},"专家演讲方式是否符合主办单位的预期:")],-1)),(0,s.bF)(n,{modelValue:l.formData.evaluation.expectationAlignment,"onUpdate:modelValue":a[5]||(a[5]=e=>l.formData.evaluation.expectationAlignment=e)},null,8,["modelValue"])]),(0,s.Lk)("div",z,[a[17]||(a[17]=(0,s.Lk)("span",{class:"score-label"},"活动总分",-1)),(0,s.Lk)("span",$,(0,C.v_)(d.totalScore)+" 分",1)]),a[18]||(a[18]=(0,s.Fv)('<div class="suggestion-field" data-v-6d1e44e0><span class="suggestion-label" data-v-6d1e44e0>其他意见或建议</span><div class="textarea-container" data-v-6d1e44e0><div class="textarea-content" data-v-6d1e44e0><span class="textarea-placeholder" data-v-6d1e44e0>希望可以多多举办活动</span></div><div class="char-count" data-v-6d1e44e0>10/300</div></div></div>',1))])])]),(0,s.Lk)("div",Q,[a[20]||(a[20]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("div",{class:"section-title-group"},[(0,s.Lk)("span",{class:"section-title"},"活动文件"),(0,s.Lk)("span",{class:"section-subtitle"},[(0,s.eW)(" 最多可上传10个文件,单个非视频文件不能超过20M;"),(0,s.Lk)("br"),(0,s.eW)(" 单个视频文件不能超过500M ")])])],-1)),(0,s.Lk)("div",M,[(0,s.bF)(o,{modelValue:e.uploadedFiles,"onUpdate:modelValue":a[6]||(a[6]=a=>e.uploadedFiles=a),"max-count":10,"max-file-size":20,"max-video-size":500,onChange:d.handleFileChange,onUploadSuccess:d.handleFileUploadSuccess,onUploadError:d.handleFileUploadError,onDelete:d.handleFileDelete,onDownload:d.handleFileDownload},null,8,["modelValue","onChange","onUploadSuccess","onUploadError","onDelete","onDownload"])])]),a[21]||(a[21]=(0,s.Fv)('<div class="report-section" data-v-6d1e44e0><div class="section-header" data-v-6d1e44e0><div class="section-title-group" data-v-6d1e44e0><span class="section-title" data-v-6d1e44e0>活动报道</span><span class="section-subtitle" data-v-6d1e44e0>非必填,未来拟对外发布</span></div><button class="ai-btn" data-v-6d1e44e0> AI生成报道 </button></div><div class="section-body" data-v-6d1e44e0><div class="report-field" data-v-6d1e44e0><div class="textarea-container" data-v-6d1e44e0><div class="textarea-content" data-v-6d1e44e0><span class="textarea-placeholder" data-v-6d1e44e0>请点击&quot;AI生成报道&quot;按钮</span></div><div class="char-count" data-v-6d1e44e0>0/2000</div></div></div></div></div>',1)),(0,s.Lk)("div",N,[(0,s.Lk)("button",{class:"btn btn-save",onClick:a[7]||(a[7]=(...e)=>d.handleSave&&d.handleSave(...e))}," 保存 "),(0,s.Lk)("button",{class:"btn btn-submit",onClick:a[8]||(a[8]=(...e)=>d.handleSubmit&&d.handleSubmit(...e))}," 提交 ")])])}var j=t(308);const G={class:"star-rating"},O={key:0,class:"score-text"};function W(e,a,t,i,l,d){const n=(0,s.g2)("van-rate");return(0,s.uX)(),(0,s.CE)("div",G,[(0,s.bF)(n,{color:"#ffd21e","model-value":t.modelValue,"onUpdate:modelValue":d.handleRateChange,count:t.maxStars,disabled:t.disabled,size:25,gutter:4},null,8,["model-value","onUpdate:modelValue","count","disabled"]),t.showScore&&t.modelValue>0?((0,s.uX)(),(0,s.CE)("span",O,(0,C.v_)(t.modelValue)+"分",1)):(0,s.Q3)("",!0)])}var H=t(9955),P={name:"StarRating",components:{"van-rate":H.tt},props:{modelValue:{type:Number,default:0},maxStars:{type:Number,default:5},showScore:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},methods:{handleRateChange(e){this.$emit("update:modelValue",e),this.$emit("change",e)}}};const Y=(0,y.A)(P,[["render",W],["__scopeId","data-v-9ead5524"]]);var Z=Y;const J={class:"file-uploader"},ee={key:0,class:"uploaded-files"},ae={class:"file-header"},te={class:"file-info"},se={class:"file-name"},ie={class:"file-actions"},le=["onClick"],de=["onClick"],ne={class:"file-details"},oe={class:"file-meta"},ce={class:"file-uploader"},ve={class:"file-tips"};function re(e,a,t,i,l,d){const n=(0,s.g2)("van-uploader");return(0,s.uX)(),(0,s.CE)("div",J,[l.uploadedFiles.length>0?((0,s.uX)(),(0,s.CE)("div",ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.uploadedFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"file-item",key:t},[(0,s.Lk)("div",ae,[(0,s.Lk)("div",te,[(0,s.Lk)("div",{class:(0,C.C4)(["file-icon",d.getFileIconClass(e.type)])},null,2),(0,s.Lk)("span",se,(0,C.v_)(e.name),1)]),(0,s.Lk)("div",ie,[((0,s.uX)(),(0,s.CE)("svg",{class:"action-icon download-icon",onClick:a=>d.downloadFile(e),viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a[1]||(a[1]=[(0,s.Lk)("path",{d:"M12 15L7 10H17L12 15Z",fill:"#666"},null,-1),(0,s.Lk)("path",{d:"M12 3V13",stroke:"#666","stroke-width":"2","stroke-linecap":"round"},null,-1),(0,s.Lk)("path",{d:"M3 17V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V17",stroke:"#666","stroke-width":"2","stroke-linecap":"round"},null,-1)]),8,le)),((0,s.uX)(),(0,s.CE)("svg",{class:"action-icon delete-icon",onClick:e=>d.deleteFile(t),viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a[2]||(a[2]=[(0,s.Lk)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"#ff4444","stroke-width":"2","stroke-linecap":"round"},null,-1)]),8,de))])]),(0,s.Lk)("div",ne,[(0,s.Lk)("span",oe,(0,C.v_)(e.size)+" "+(0,C.v_)(e.uploadTime),1),(0,s.Lk)("span",ce,"上传人："+(0,C.v_)(e.uploader),1)])]))),128))])):(0,s.Q3)("",!0),(0,s.bF)(n,{modelValue:l.fileList,"onUpdate:modelValue":a[0]||(a[0]=e=>l.fileList=e),"max-count":t.maxCount,"max-size":1024*t.maxFileSize*1024,accept:t.acceptedTypes,"before-upload":d.beforeUpload,"after-read":d.afterRead,"upload-text":"+ 添加文件",class:"custom-uploader","show-upload":l.uploadedFiles.length<t.maxCount},{default:(0,s.k6)(()=>a[3]||(a[3]=[(0,s.Lk)("div",{class:"upload-btn"},[(0,s.Lk)("span",{class:"upload-text"},"+ 添加文件")],-1)])),_:1},8,["modelValue","max-count","max-size","accept","before-upload","after-read","show-upload"]),(0,s.Lk)("div",ve,(0,C.v_)(t.tipText),1)])}var ue={name:"FileUploader",props:{maxCount:{type:Number,default:10},value:{type:Array,default:()=>[]},acceptedTypes:{type:String,default:".pdf,.jpg,.jpeg,.png,.tif,.bmp,.doc,.docx,.xlsx,.xls,.mp4,.mov,.avi"},tipText:{type:String,default:"支持扩展名:pdf.jpg.jpeg.png.tif.bmp.doc.docx.xlsx.xls.mp4.mov.avi"},maxFileSize:{type:Number,default:20},maxVideoSize:{type:Number,default:500}},data(){return{fileList:[],uploadedFiles:[...this.value]}},watch:{value:{handler(e){this.uploadedFiles=[...e]},deep:!0},uploadedFiles:{handler(e){this.$emit("input",e),this.$emit("change",e)},deep:!0}},methods:{getFileIconClass(e){const a={pdf:"file-icon-pdf",doc:"file-icon-doc",docx:"file-icon-doc",xlsx:"file-icon-excel",xls:"file-icon-excel",jpg:"file-icon-image",jpeg:"file-icon-image",png:"file-icon-image",tif:"file-icon-image",bmp:"file-icon-image",mp4:"file-icon-video",mov:"file-icon-video",avi:"file-icon-video"};return a[e]||"file-icon-default"},beforeUpload(e){const a=e.name.split(".").pop().toLowerCase(),t=this.acceptedTypes.replace(/\./g,"").split(",");if(!t.includes(a))return this.$toast("不支持的文件格式"),!1;const s=["mp4","mov","avi"],i=s.includes(a)?1024*this.maxVideoSize*1024:1024*this.maxFileSize*1024;return e.size>i?(this.$toast(s.includes(a)?`视频文件不能超过${this.maxVideoSize}M`:`文件不能超过${this.maxFileSize}M`),!1):!(this.uploadedFiles.length>=this.maxCount)||(this.$toast(`最多只能上传${this.maxCount}个文件`),!1)},async afterRead(e){try{const a={name:e.file.name,size:this.formatFileSize(e.file.size),uploadTime:this.formatDate(new Date),uploader:"当前用户",type:e.file.name.split(".").pop().toLowerCase(),url:e.content,id:Date.now()};this.uploadedFiles.push(a),this.fileList=[],this.$emit("upload-success",a)}catch(a){this.$toast("上传失败，请重试"),this.$emit("upload-error",a)}},downloadFile(e){e.url?window.open(e.url,"_blank"):this.$toast("文件链接不存在"),this.$emit("download",e)},deleteFile(e){this.$dialog.confirm({title:"确认删除",message:"确定要删除这个文件吗？"}).then(()=>{const a=this.uploadedFiles[e];this.uploadedFiles.splice(e,1),this.$emit("delete",a,e)}).catch(()=>{})},formatFileSize(e){if(0===e)return"0 B";const a=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(1))+t[s]},formatDate(e){const a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0"),d=String(e.getSeconds()).padStart(2,"0");return`${a}-${t}-${s} ${i}:${l}:${d}`},clearFiles(){this.uploadedFiles=[]},addFile(e){this.uploadedFiles.push(e)}}};const pe=(0,y.A)(ue,[["render",re],["__scopeId","data-v-7ab19916"]]);var me=pe,he={name:"FeedbackForm",components:{FormField:j.A,StarRating:Z,FileUploader:me},props:{activity:{type:Object,required:!0}},data(){return{formData:{registrationCount:108,actualCustomerCount:"",actualAgentCount:"",onlineParticipantCount:48,recordedInOtherSystem:"",activityCost:"",costPurpose:"",onSiteSigning:null,evaluation:{contentSuitability:5,presentationEffectiveness:0,businessNeedAlignment:0,expectationAlignment:0,suggestions:"希望可以多多举办活动"},report:""}}},computed:{totalScore(){const{evaluation:e}=this.formData,a=[e.contentSuitability,e.presentationEffectiveness,e.businessNeedAlignment,e.expectationAlignment],t=a.reduce((e,a)=>e+a,0);return(t/4).toFixed(2)}},methods:{showSystemPicker(){console.log("Show system picker")},handleSave(){this.$emit("save",this.formData)},handleSubmit(){this.$emit("submit",this.formData)},handleFileChange(e){this.uploadedFiles=e},handleFileUploadSuccess(e){console.log("文件上传成功:",e)},handleFileUploadError(e){console.error("文件上传失败:",e)},handleFileDelete(e,a){console.log("文件删除:",e,a)},handleFileDownload(e){console.log("文件下载:",e)}}};const fe=(0,y.A)(he,[["render",K],["__scopeId","data-v-6d1e44e0"]]);var ge=fe;const be={class:"audit-record-page"},ke={class:"content"},Ae={class:"audit-records"},ye={class:"timeline"},xe={key:0,class:"timeline-line"},Le={class:"record-content"},Ce={class:"record-time"},Se={class:"record-card"},Fe={class:"record-info"},Ee={class:"info-row"},we={class:"value"},De={class:"info-row"},Ve={class:"value"};function Ie(e,a,t,i,l,d){const n=(0,s.g2)("EmptyState");return(0,s.uX)(),(0,s.CE)("div",be,[(0,s.Lk)("div",ke,[(0,s.Lk)("div",Ae,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.auditRecords,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"audit-record-item"},[(0,s.Lk)("div",ye,[t<l.auditRecords.length-1?((0,s.uX)(),(0,s.CE)("div",xe)):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,C.C4)(["timeline-dot",e.status])},null,2)]),(0,s.Lk)("div",Le,[(0,s.Lk)("div",Ce,"审核时间："+(0,C.v_)(d.formatTime(e.time)),1),(0,s.Lk)("div",Se,[(0,s.Lk)("div",Fe,[(0,s.Lk)("div",Ee,[a[0]||(a[0]=(0,s.Lk)("span",{class:"label"},"审核结论",-1)),(0,s.Lk)("span",we,(0,C.v_)(e.conclusion),1)]),(0,s.Lk)("div",De,[a[1]||(a[1]=(0,s.Lk)("span",{class:"label"},"审核意见",-1)),(0,s.Lk)("span",Ve,(0,C.v_)(e.comment||"无"),1)])]),(0,s.Lk)("div",{class:(0,C.C4)(["status-badge",e.status])},[(0,s.Lk)("span",null,(0,C.v_)(e.statusText),1)],2)])])]))),128))]),0===l.auditRecords.length?((0,s.uX)(),(0,s.Wv)(n,{key:0,text:"暂无审核记录"})):(0,s.Q3)("",!0)])])}var Be=t(7487),Xe={name:"AuditRecord",components:{EmptyState:Be.A},props:{activity:{type:Object,required:!0}},data(){return{auditRecords:[{round:1,status:"approved",statusText:"审核通过",time:"2025-01-01 14:00:00",auditor:"张三",conclusion:"审核通过",comment:"请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整"},{round:2,status:"rejected",statusText:"审核不通过",time:"2025-01-01 14:00:00",auditor:"李四",conclusion:"审核不通过",comment:"请重新调整"}]}},mounted(){this.loadAuditRecords()},methods:{formatTime(e){if(!e)return"";const a=new Date(e);return a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-")},loadAuditRecords(){console.log("Loading audit records for activity:",this.activity.id)}}};const _e=(0,y.A)(Xe,[["render",Ie],["__scopeId","data-v-010fa4d4"]]);var Re=_e,qe={name:"ActivityDetail",components:{NavigationBar:v.A,TabsBar:r.A,ActivityInfo:L,FeedbackForm:ge,AuditRecord:Re},data(){return{activeTab:"info",infoEditable:!1,tabItems:[{key:"info",label:"活动信息",count:""},{key:"feedback",label:"评价反馈",count:""},{key:"audit",label:"审核记录",count:""}],activity:{id:1,name:"活动名称活动名称活动名称",branch:"北京分公司",department:"北京本部",strategy:"高客战略",channel:"线上",startTime:"2025-01-02 08:00:00",endTime:"2025-01-02 12:00:00",category:"服务行销",healthInsurance:"否",venue:"职场",location:"北京市/北京市",status:"发布待审核"}}},mounted(){const e=this.$route.params.id;e&&this.loadActivityDetail(e)},methods:{handleBack(){this.$router.back()},handleTabChange(e){this.activeTab=e},handleEditInfo(){this.infoEditable=!0},handleSaveInfo(e){this.activity={...this.activity,...e},this.infoEditable=!1},handleFeedbackSubmit(e){console.log("Feedback submitted:",e)},loadActivityDetail(e){console.log("Loading activity detail for id:",e)}}};const Te=(0,y.A)(qe,[["render",c],["__scopeId","data-v-d893013e"]]);var Ue=Te},9020:function(e,a,t){t.d(a,{A:function(){return m}});var s=t(6768),i=t(4232);const l={class:"status-tabs"},d={class:"status-items"},n=["onClick"],o={class:"status-text"},c={key:0,class:"status-indicator"};function v(e,a,t,v,r,u){return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.statusItems,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:(0,i.C4)(["status-item",{active:t.activeStatus===e.key}]),onClick:a=>u.handleStatusClick(e.key)},[(0,s.Lk)("span",o,(0,i.v_)(e.label)+(0,i.v_)(e.count),1),t.activeStatus===e.key?((0,s.uX)(),(0,s.CE)("div",c)):(0,s.Q3)("",!0)],10,n))),128))])])}var r={name:"TabsBar",props:{items:{type:Array,required:!0,default:()=>[]},activeStatus:{type:String,default:"all"}},computed:{statusItems(){return this.items}},methods:{handleStatusClick(e){this.$emit("status-change",e)}}},u=t(1241);const p=(0,u.A)(r,[["render",v],["__scopeId","data-v-323a34f8"]]);var m=p}}]);
//# sourceMappingURL=189.7cb8d4c0.js.map