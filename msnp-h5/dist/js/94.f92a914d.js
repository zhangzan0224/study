"use strict";(self["webpackChunkmsnp_h5"]=self["webpackChunkmsnp_h5"]||[]).push([[94],{8172:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(908),r=n(388),l=n(8653),s=(n(4346),n(4114),n(4554),n(9089),n(6768)),o=n(144),c=n(1387),i=n(715),u=n(1002),v=n(162),p=n(5048),d={class:"page flex-col"},f={class:"form-content"},h={class:"form-section"},m={key:0,class:"expert-form-section"};const x={__name:"NewActivity",setup:function(e){var t=(0,c.rd)(),n=(0,o.KR)(null),x=(0,o.KR)({branchCode:"",subbracnCode:"",strategy:"",name:"",channel:"",startTime:"",endTime:"",category:"",healthRelate:"",venue:"",location:"",detailAddress:"",content:"健康讲座",method:"",generateQRCode:"",description:"",liveLink:"",publicRelease:"",traditionalMedicine:"",experts:[]}),b=(0,s.EW)(function(){var e=x.value.content;return"健康讲座"===e||"义诊"===e});(0,s.sV)(function(){b.value&&0===x.value.experts.length&&C()});var k=function(){t.back()},w=function(e){console.log("分公司已选择:",e),(0,i.GF)("已选择分公司: ".concat(e.text)),x.value.department="",y(e.value)},A=function(e){console.log("分公司已变更，代码:",e)},g=function(){console.log("分公司已清空"),x.value.department=""},y=function(){var e=(0,r.A)((0,a.A)().m(function e(t){return(0,a.A)().w(function(e){while(1)switch(e.n){case 0:try{console.log("正在加载分公司 ".concat(t," 下的中支数据..."))}catch(n){console.error("加载中支数据失败:",n),(0,i.xr)("加载中支数据失败")}case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){0===x.value.experts.length&&x.value.experts.push({id:1,photo:"",name:"",title:"",hospital:"",department:"",introduction:""})},L=function(){var e={id:Date.now(),photo:"",name:"",title:"",hospital:"",department:"",introduction:""};x.value.experts.push(e)},F=function(e,t){x.value.experts[e]=(0,l.A)((0,l.A)({},x.value.experts[e]),t)},R=function(e){x.value.experts.length>1&&x.value.experts.splice(e,1)},_=function(){var e=(0,r.A)((0,a.A)().m(function e(){var t,r,l,s;return(0,a.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,null===(t=n.value)||void 0===t||null===(r=t.validate)||void 0===r?void 0:r.call(t);case 1:e.n=3;break;case 2:return e.p=2,s=e.v,l=Array.isArray(s)?s[0]:null,l&&l.message&&(0,i.xr)(l.message),e.a(2);case 3:console.log("Save activity:",x.value),(0,i.GF)("保存成功");case 4:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.A)((0,a.A)().m(function e(){var t,r;return(0,a.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,null===(t=n.value)||void 0===t||null===(r=t.validate)||void 0===r?void 0:r.call(t);case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2);case 3:console.log("Submit activity:",x.value),(0,i.GF)("提交成功");case 4:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return function(e,t){return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(u.A,{title:"新建活动",onBack:k}),(0,s.Lk)("div",f,[(0,s.Lk)("div",h,[(0,s.bF)(v.A,{ref_key:"activityBasicFormRef",ref:n,formData:x.value,"onUpdate:formData":t[0]||(t[0]=function(e){return x.value=e}),editable:!0,"show-header":!0,"show-extended-fields":!0,onBranchSelected:w,onBranchChanged:A,onBranchCleared:g},null,8,["formData"])]),b.value?((0,s.uX)(),(0,s.CE)("div",m,[t[1]||(t[1]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("span",{class:"section-title"},"讲师信息"),(0,s.Lk)("div",{class:"header-divider"})],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(x.value.experts,function(e,t){return(0,s.uX)(),(0,s.CE)("div",{key:t,class:"expert-section"},[(0,s.bF)(p.A,{expert:e,index:t,onUpdate:F,onRemove:R,"show-remove":x.value.experts.length>1},null,8,["expert","index","show-remove"])])}),128)),(0,s.Lk)("div",{class:"add-expert-wrapper"},[(0,s.Lk)("span",{class:"add-expert-text",onClick:L},"+ 继续添加讲师")])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",{class:"action-buttons flex-row justify-between"},[(0,s.Lk)("div",{class:"btn-wrapper btn-save-wrapper"},[(0,s.Lk)("span",{class:"btn-text btn-save-text",onClick:_},"保存")]),(0,s.Lk)("div",{class:"btn-wrapper btn-submit-wrapper"},[(0,s.Lk)("span",{class:"btn-text btn-submit-text",onClick:B},"提交")])])])}}};var b=n(1241);const k=(0,b.A)(x,[["__scopeId","data-v-ea507ab8"]]),w=k}}]);
//# sourceMappingURL=94.f92a914d.js.map