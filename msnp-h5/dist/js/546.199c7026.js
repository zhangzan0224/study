"use strict";(self["webpackChunkmsnp_h5"]=self["webpackChunkmsnp_h5"]||[]).push([[546],{2341:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});a(4114);var s=a(6768),n=a(144),l=a(1387),r=a(715),o=a(1002),c=a(5312),i=a(5048);const d={class:"page flex-col"},u={class:"form-content"},p={class:"form-section"},v={key:0,class:"expert-form-section"};var h={__name:"NewActivity",setup(e){const t=(0,l.rd)(),a=(0,n.KR)(null),h=(0,n.KR)({branchCode:"",subbracnCode:"",strategy:"",name:"",channel:"",startTime:"",endTime:"",category:"",healthInsurance:"",venue:"",location:"",detailAddress:"",content:"健康讲座",method:"",generateQRCode:"",description:"",liveLink:"",publicRelease:"",traditionalMedicine:"",experts:[]}),x=(0,s.EW)(()=>{const e=h.value.content;return"健康讲座"===e||"义诊"===e});(0,s.sV)(()=>{x.value&&0===h.value.experts.length&&g()});const m=()=>{t.back()},b=e=>{console.log("分公司已选择:",e),(0,r.GF)(`已选择分公司: ${e.text}`),h.value.department="",y(e.value)},k=e=>{console.log("分公司已变更，代码:",e)},f=()=>{console.log("分公司已清空"),h.value.department=""},y=async e=>{try{console.log(`正在加载分公司 ${e} 下的中支数据...`)}catch(t){console.error("加载中支数据失败:",t),(0,r.xr)("加载中支数据失败")}},g=()=>{0===h.value.experts.length&&h.value.experts.push({id:1,photo:"",name:"",title:"",hospital:"",department:"",introduction:""})},w=()=>{const e={id:Date.now(),photo:"",name:"",title:"",hospital:"",department:"",introduction:""};h.value.experts.push(e)},C=(e,t)=>{h.value.experts[e]={...h.value.experts[e],...t}},L=e=>{h.value.experts.length>1&&h.value.experts.splice(e,1)},A=async()=>{try{await(a.value?.validate?.())}catch(e){const t=Array.isArray(e)?e[0]:null;return void(t&&t.message&&(0,r.xr)(t.message))}console.log("Save activity:",h.value),(0,r.GF)("保存成功")},F=async()=>{try{await(a.value?.validate?.())}catch(e){const t=Array.isArray(e)?e[0]:null;return void(t&&t.message&&(0,r.xr)(t.message))}console.log("Submit activity:",h.value),(0,r.GF)("提交成功")};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(o.A,{title:"新建活动",onBack:m}),(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[(0,s.bF)(c.A,{ref_key:"activityBasicFormRef",ref:a,formData:h.value,"onUpdate:formData":t[0]||(t[0]=e=>h.value=e),editable:!0,"show-header":!0,"show-extended-fields":!0,onBranchSelected:b,onBranchChanged:k,onBranchCleared:f},null,8,["formData"])]),x.value?((0,s.uX)(),(0,s.CE)("div",v,[t[1]||(t[1]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("span",{class:"section-title"},"讲师信息"),(0,s.Lk)("div",{class:"header-divider"})],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(h.value.experts,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"expert-section"},[(0,s.bF)(i.A,{expert:e,index:t,onUpdate:C,onRemove:L,"show-remove":h.value.experts.length>1},null,8,["expert","index","show-remove"])]))),128)),(0,s.Lk)("div",{class:"add-expert-wrapper"},[(0,s.Lk)("span",{class:"add-expert-text",onClick:w},"+ 继续添加讲师")])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",{class:"action-buttons flex-row justify-between"},[(0,s.Lk)("div",{class:"btn-wrapper btn-save-wrapper"},[(0,s.Lk)("span",{class:"btn-text btn-save-text",onClick:A},"保存")]),(0,s.Lk)("div",{class:"btn-wrapper btn-submit-wrapper"},[(0,s.Lk)("span",{class:"btn-text btn-submit-text",onClick:F},"提交")])])]))}},x=a(1241);const m=(0,x.A)(h,[["__scopeId","data-v-1f4fb0bf"]]);var b=m}}]);
//# sourceMappingURL=546.199c7026.js.map