"use strict";(self["webpackChunkmsnp_h5"]=self["webpackChunkmsnp_h5"]||[]).push([[963],{1002:function(t,a,i){i.d(a,{A:function(){return v}});var s=i(6768),c=i(4232),n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAsCAYAAAAXb/p7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAALAAAAACPZsBsAAAA10lEQVRYCe2WPQrCQBQGgxaeQBQJEhsREURyba28gYiIiIUo/tzD3tnitam+4hVfYEhIYFhm2c1WlS8XcAEXcAEXcAEX6CjQ7/im+jRDNICfSqj0NMhusFVKVa4poivcYa6Sqjw1ogs8YKGSqjwTRGd4wlIlVXnGiE7wgpVKqvKMEB3hDWuVVOUZIjrABzYqqdKzR/aFViktrp5amNWXfopLuNSLJGY29TYTg0y9UccgU//qYpCpDwsxyIaHctzaxYuM93JgLSvclwu4gAu4gAu4gAvoC/wBGsYc4hgbfPUAAAAASUVORK5CYII=";const e={class:"navigation-bar"},o={class:"nav-center"},l={class:"nav-title"},r={class:"nav-right"},d=["src"],u={class:"action-text"};function A(t,a,i,A,m,h){return(0,s.uX)(),(0,s.CE)("div",e,[i.showBack?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"nav-left",onClick:a[0]||(a[0]=(...t)=>h.handleBack&&h.handleBack(...t))},a[2]||(a[2]=[(0,s.Lk)("img",{src:n,alt:"返回",class:"back-icon"},null,-1)]))):(0,s.Q3)("",!0),(0,s.Lk)("div",o,[(0,s.Lk)("span",l,(0,c.v_)(i.title),1)]),(0,s.Lk)("div",r,[(0,s.RG)(t.$slots,"right",{},()=>[i.rightText?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"nav-action",onClick:a[1]||(a[1]=(...t)=>h.handleRightClick&&h.handleRightClick(...t))},[i.rightIcon?((0,s.uX)(),(0,s.CE)("img",{key:0,src:i.rightIcon,alt:"",class:"action-icon"},null,8,d)):(0,s.Q3)("",!0),(0,s.Lk)("span",u,(0,c.v_)(i.rightText),1)])):(0,s.Q3)("",!0)],!0)])])}var m={name:"NavigationBar",props:{title:{type:String,default:""},showBack:{type:Boolean,default:!0},rightText:{type:String,default:""},rightIcon:{type:String,default:""}},methods:{handleBack(){this.$emit("back"),this.$router&&this.$router.back()},handleRightClick(){this.$emit("right-click")}}},h=i(1241);const k=(0,h.A)(m,[["render",A],["__scopeId","data-v-6fd4d726"]]);var v=k},5963:function(t,a,i){i.r(a),i.d(a,{default:function(){return Y}});var s=i(6768),c=i(4232),n=i(5130);const e={class:"audit-activity-page"},o={class:"audit-form"},l={class:"form-section"},r={class:"field-group"},d={class:"conclusion-options"},u={class:"field-group"},A={class:"comment-section"},m={class:"char-counter"},h=["disabled"],k={key:0,class:"history-section"},v={class:"history-list"},g={class:"history-meta"},p={class:"history-round"},f={class:"history-time"},L={class:"history-content"},y={class:"history-field"},C={class:"field-value"},b={class:"history-field"},B={key:0,class:"history-field"},E={class:"field-value"};function I(t,a,i,I,S,D){const X=(0,s.g2)("NavigationBar");return(0,s.uX)(),(0,s.CE)("div",e,[(0,s.bF)(X,{title:"审核活动",onBack:D.handleBack},null,8,["onBack"]),(0,s.Lk)("div",o,[(0,s.Lk)("div",l,[(0,s.Lk)("div",r,[a[4]||(a[4]=(0,s.Lk)("div",{class:"field-label"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"label-text"},"审核结论")],-1)),(0,s.Lk)("div",d,[(0,s.Lk)("button",{class:(0,c.C4)(["conclusion-btn",{active:"rejected"===S.formData.conclusion,rejected:"rejected"===S.formData.conclusion}]),onClick:a[0]||(a[0]=t=>D.selectConclusion("rejected"))}," 不通过 ",2),(0,s.Lk)("button",{class:(0,c.C4)(["conclusion-btn",{active:"approved"===S.formData.conclusion,approved:"approved"===S.formData.conclusion}]),onClick:a[1]||(a[1]=t=>D.selectConclusion("approved"))}," 通过 ",2)])]),(0,s.Lk)("div",u,[a[5]||(a[5]=(0,s.Lk)("div",{class:"field-label"},[(0,s.Lk)("span",{class:"required-mark"},"*"),(0,s.Lk)("span",{class:"label-text"},"审核意见")],-1)),(0,s.Lk)("div",A,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[2]||(a[2]=t=>S.formData.comment=t),placeholder:"请输入",class:"comment-textarea",maxlength:300},null,512),[[n.Jo,S.formData.comment]]),(0,s.Lk)("div",m,(0,c.v_)(S.formData.comment.length)+"/300 ",1)])]),(0,s.Lk)("button",{class:"submit-btn",disabled:!D.canSubmit,onClick:a[3]||(a[3]=(...t)=>D.handleSubmit&&D.handleSubmit(...t))}," 提交 ",8,h)])]),S.auditHistory.length>0?((0,s.uX)(),(0,s.CE)("div",k,[a[9]||(a[9]=(0,s.Lk)("div",{class:"history-header"},[(0,s.Lk)("span",{class:"history-title"},"历史审核记录")],-1)),(0,s.Lk)("div",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(S.auditHistory,(t,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"history-item"},[(0,s.Lk)("div",g,[(0,s.Lk)("span",p,"第"+(0,c.v_)(t.round)+"轮审核",1),(0,s.Lk)("span",f,(0,c.v_)(D.formatTime(t.time)),1)]),(0,s.Lk)("div",L,[(0,s.Lk)("div",y,[a[6]||(a[6]=(0,s.Lk)("span",{class:"field-name"},"审核人：",-1)),(0,s.Lk)("span",C,(0,c.v_)(t.auditor),1)]),(0,s.Lk)("div",b,[a[7]||(a[7]=(0,s.Lk)("span",{class:"field-name"},"审核结论：",-1)),(0,s.Lk)("span",{class:(0,c.C4)(["field-value",t.conclusion])},(0,c.v_)(t.conclusionText),3)]),t.comment?((0,s.uX)(),(0,s.CE)("div",B,[a[8]||(a[8]=(0,s.Lk)("span",{class:"field-name"},"审核意见：",-1)),(0,s.Lk)("span",E,(0,c.v_)(t.comment),1)])):(0,s.Q3)("",!0)])]))),128))])])):(0,s.Q3)("",!0)])}var S=i(1002),D={name:"AuditActivity",components:{NavigationBar:S.A},data(){return{activityId:null,formData:{conclusion:"",comment:""},auditHistory:[{round:1,time:"2025-01-01 10:30:00",auditor:"张三",conclusion:"rejected",conclusionText:"不通过",comment:"活动时间安排不合理，需要重新调整活动时间，建议避开节假日。"}]}},computed:{canSubmit(){return this.formData.conclusion&&this.formData.comment.trim()}},methods:{handleBack(){this.$router.back()},selectConclusion(t){this.formData.conclusion=t},handleSubmit(){if(!this.canSubmit)return;const t={activityId:this.activityId,conclusion:this.formData.conclusion,comment:this.formData.comment,timestamp:(new Date).toISOString()};console.log("Submit audit:",t),this.$router.back()},formatTime(t){if(!t)return"";const a=new Date(t);return a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},loadAuditHistory(){console.log("Loading audit history for activity:",this.activityId)}},mounted(){this.activityId=this.$route.params.id||this.$route.query.id,this.loadAuditHistory()}},X=i(1241);const Q=(0,X.A)(D,[["render",I],["__scopeId","data-v-5fd42bb9"]]);var Y=Q}}]);
//# sourceMappingURL=963.9d0ba3db.js.map