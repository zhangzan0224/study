"use strict";(self["webpackChunkmsnp_h5"]=self["webpackChunkmsnp_h5"]||[]).push([[544],{533:(e,t,a)=>{var l=a(9504),n=a(8014),u=a(655),o=a(2333),i=a(7750),r=l(o),c=l("".slice),d=Math.ceil,s=function(e){return function(t,a,l){var o,s,v=u(i(t)),p=n(a),f=v.length,m=void 0===l?" ":u(l);return p<=f||""===m?v:(o=p-f,s=r(m,d(o/m.length)),s.length>o&&(s=c(s,0,o)),e?v+s:s+v)}};e.exports={start:s(!1),end:s(!0)}},1002:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(6768),n=a(4232);const u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAsCAYAAAAXb/p7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAALAAAAACPZsBsAAAA10lEQVRYCe2WPQrCQBQGgxaeQBQJEhsREURyba28gYiIiIUo/tzD3tnitam+4hVfYEhIYFhm2c1WlS8XcAEXcAEXcAEX6CjQ7/im+jRDNICfSqj0NMhusFVKVa4poivcYa6Sqjw1ogs8YKGSqjwTRGd4wlIlVXnGiE7wgpVKqvKMEB3hDWuVVOUZIjrABzYqqdKzR/aFViktrp5amNWXfopLuNSLJGY29TYTg0y9UccgU//qYpCpDwsxyIaHctzaxYuM93JgLSvclwu4gAu4gAu4gAvoC/wBGsYc4hgbfPUAAAAASUVORK5CYII=";var o={class:"navigation-bar"},i={class:"nav-center"},r={class:"nav-title"},c={class:"nav-right"},d=["src"],s={class:"action-text"};function v(e,t,a,v,p,f){return(0,l.uX)(),(0,l.CE)("div",o,[a.showBack?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"nav-left",onClick:t[0]||(t[0]=function(){return f.handleBack&&f.handleBack.apply(f,arguments)})},t[2]||(t[2]=[(0,l.Lk)("img",{src:u,alt:"返回",class:"back-icon"},null,-1)]))):(0,l.Q3)("",!0),(0,l.Lk)("div",i,[(0,l.Lk)("span",r,(0,n.v_)(a.title),1)]),(0,l.Lk)("div",c,[(0,l.RG)(e.$slots,"right",{},function(){return[a.rightText?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"nav-action",onClick:t[1]||(t[1]=function(){return f.handleRightClick&&f.handleRightClick.apply(f,arguments)})},[a.rightIcon?((0,l.uX)(),(0,l.CE)("img",{key:0,src:a.rightIcon,alt:"",class:"action-icon"},null,8,d)):(0,l.Q3)("",!0),(0,l.Lk)("span",s,(0,n.v_)(a.rightText),1)])):(0,l.Q3)("",!0)]},!0)])])}const p={name:"NavigationBar",props:{title:{type:String,default:""},showBack:{type:Boolean,default:!0},rightText:{type:String,default:""},rightIcon:{type:String,default:""}},methods:{handleBack:function(){this.$emit("back"),this.$router&&this.$router.back()},handleRightClick:function(){this.$emit("right-click")}}};var f=a(1241);const m=(0,f.A)(p,[["render",v],["__scopeId","data-v-6fd4d726"]]),b=m},1278:(e,t,a)=>{var l=a(6518),n=a(3724),u=a(5031),o=a(5397),i=a(7347),r=a(2278);l({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var t,a,l=o(e),n=i.f,c=u(l),d={},s=0;while(c.length>s)a=n(l,t=c[s++]),void 0!==a&&r(d,t,a);return d}})},3063:(e,t,a)=>{var l=a(2839);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(l)},3141:(e,t,a)=>{a.d(t,{A:()=>d});a(113),a(4423),a(2010),a(8111),a(116),a(2892),a(6099);var l=a(6768),n=a(4232),u={key:1,class:"textarea-field"},o={key:4,class:"field-divider"};const i={__name:"FormField",props:{label:{type:String,required:!0},modelValue:{type:[String,Number],default:""},type:{type:String,default:"input",validator:function(e){return["input","textarea","select","text"].includes(e)}},placeholder:{type:String,default:"请输入"},labelWidth:{type:String,default:"150px"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxLength:{type:Number,default:null},showCounter:{type:Boolean,default:!0},showDivider:{type:Boolean,default:!0},rows:{type:Number,default:3},options:{type:Array,default:function(){return[]}},name:{type:String,default:""},rules:{type:Array,default:null}},emits:["update:modelValue","select-click","input","blur"],setup:function(e,t){var a=t.emit,i=e,r=a,c=(0,l.EW)({get:function(){return i.modelValue},set:function(e){r("update:modelValue",e)}}),d=(0,l.EW)(function(){if("select"!==i.type)return i.modelValue||i.placeholder;if(!i.modelValue)return"";var e=i.options.find(function(e){return e.value===i.modelValue});return e?e.text:String(i.modelValue)}),s=(0,l.EW)(function(){return{"custom-field":!0,"field-disabled":i.disabled}}),v=(0,l.EW)(function(){if(i.rules&&i.rules.length)return i.rules;if(!i.required)return[];if("select"===i.type){var e="请选择".concat(i.label);return[{validator:function(){return!!i.modelValue},message:e}]}var t="请输入".concat(i.label);return[{required:!0,message:t}]}),p=function(){"select"!==i.type||i.disabled||r("select-click")},f=function(e){r("input",e)},m=function(e){r("blur",e)};return function(t,a){var i=(0,l.g2)("van-field");return(0,l.uX)(),(0,l.CE)("div",{class:(0,n.C4)(["form-field",{"has-required":e.required}])},["input"===e.type?((0,l.uX)(),(0,l.Wv)(i,{key:0,modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return c.value=e}),required:e.required,label:e.label,placeholder:e.placeholder,maxlength:e.maxLength,disabled:e.disabled,"show-word-limit":e.showCounter&&e.maxLength,"label-width":e.labelWidth,"input-align":"right",onInput:f,onBlur:m,name:e.name,rules:v.value,class:(0,n.C4)(s.value)},null,8,["modelValue","required","label","placeholder","maxlength","disabled","show-word-limit","label-width","name","rules","class"])):"textarea"===e.type?((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",{class:(0,n.C4)(["textarea-label",{required:e.required}])},(0,n.v_)(e.label),3),(0,l.bF)(i,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return c.value=e}),type:"textarea",placeholder:e.placeholder,maxlength:e.maxLength,disabled:e.disabled,rows:e.rows,"show-word-limit":e.showCounter&&e.maxLength,"label-width":e.labelWidth,onInput:f,onBlur:m,name:e.name,rules:v.value,class:(0,n.C4)(["textarea-control",s.value])},null,8,["modelValue","placeholder","maxlength","disabled","rows","show-word-limit","label-width","name","rules","class"])])):"select"===e.type?((0,l.uX)(),(0,l.Wv)(i,{key:2,"model-value":d.value,required:e.required,label:e.label,placeholder:e.placeholder,readonly:"","is-link":"","input-align":"right","label-width":e.labelWidth,onClick:p,name:e.name,rules:v.value,class:(0,n.C4)([s.value,{"field-placeholder":!e.modelValue},"select-field"])},null,8,["model-value","required","label","placeholder","label-width","name","rules","class"])):"text"===e.type?((0,l.uX)(),(0,l.Wv)(i,{key:3,"model-value":e.modelValue||e.placeholder,required:e.required,label:e.label,readonly:"","input-align":"right","label-width":e.labelWidth,name:e.name,rules:v.value,class:(0,n.C4)([s.value,{"field-placeholder":!e.modelValue}])},null,8,["model-value","required","label","label-width","name","rules","class"])):(0,l.Q3)("",!0),e.showDivider?((0,l.uX)(),(0,l.CE)("div",o)):(0,l.Q3)("",!0)],2)}}};var r=a(1241);const c=(0,r.A)(i,[["__scopeId","data-v-4eb91028"]]),d=c},5048:(e,t,a)=>{a.d(t,{A:()=>b});a(2010);var l=a(6768),n={class:"expert-form"},u={class:"photo-section"},o=["src"],i={key:1,class:"upload-placeholder"},r={class:"info-section"},c={key:0,class:"remove-section"};function d(e,t,a,d,s,v){var p=(0,l.g2)("FormField");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",u,[t[8]||(t[8]=(0,l.Lk)("div",{class:"photo-label"},"照片",-1)),(0,l.Lk)("div",{class:"photo-upload",onClick:t[0]||(t[0]=function(){return v.handlePhotoUpload&&v.handlePhotoUpload.apply(v,arguments)})},[a.expert.photo?((0,l.uX)(),(0,l.CE)("img",{key:0,src:a.expert.photo,alt:"专家照片",class:"expert-photo"},null,8,o)):((0,l.uX)(),(0,l.CE)("div",i,t[7]||(t[7]=[(0,l.Lk)("span",{class:"iconfont upload-icon"},"+",-1)])))])]),(0,l.Lk)("div",r,[(0,l.bF)(p,{label:"姓名",required:!0,type:"input",modelValue:s.localExpert.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.localExpert.name=e}),placeholder:"请输入",onInput:v.handleUpdate},null,8,["modelValue","onInput"]),(0,l.bF)(p,{label:"职称",required:!0,type:"select",modelValue:s.localExpert.title,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.localExpert.title=e}),placeholder:"请选择",onSelectClick:v.showTitlePicker},null,8,["modelValue","onSelectClick"]),(0,l.bF)(p,{label:"医院",required:!0,type:"input",modelValue:s.localExpert.hospital,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.localExpert.hospital=e}),placeholder:"请输入",onInput:v.handleUpdate},null,8,["modelValue","onInput"]),(0,l.bF)(p,{label:"科室",type:"input",modelValue:s.localExpert.department,"onUpdate:modelValue":t[4]||(t[4]=function(e){return s.localExpert.department=e}),placeholder:"请输入",onInput:v.handleUpdate},null,8,["modelValue","onInput"]),(0,l.bF)(p,{label:"介绍",type:"textarea",modelValue:s.localExpert.introduction,"onUpdate:modelValue":t[5]||(t[5]=function(e){return s.localExpert.introduction=e}),placeholder:"请输入","max-length":400,rows:4,"show-divider":!1,onInput:v.handleUpdate},null,8,["modelValue","onInput"])]),a.showRemove?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("button",{class:"remove-btn",onClick:t[6]||(t[6]=function(){return v.handleRemove&&v.handleRemove.apply(v,arguments)})}," 删除讲师 ")])):(0,l.Q3)("",!0)])}var s=a(8653),v=(a(2892),a(3141));const p={name:"ExpertForm",components:{FormField:v.A},props:{expert:{type:Object,required:!0},index:{type:Number,required:!0},showRemove:{type:Boolean,default:!1}},data:function(){return{localExpert:(0,s.A)({},this.expert)}},watch:{expert:{handler:function(e){this.localExpert=(0,s.A)({},e)},deep:!0}},methods:{handlePhotoUpload:function(){console.log("Upload photo for expert:",this.index)},showTitlePicker:function(){console.log("Show title picker")},handleUpdate:function(){this.$emit("update",this.index,this.localExpert)},handleRemove:function(){this.$emit("remove",this.index)}}};var f=a(1241);const m=(0,f.A)(p,[["render",d],["__scopeId","data-v-6e8e7d07"]]),b=m},5472:(e,t,a)=>{a.d(t,{A:()=>J});var l=a(908),n=a(388),u=a(8676),o=a(8653),i=(a(2675),a(9463),a(2010),a(6768)),r=a(144),c=a(3141),d=(a(113),a(8980),a(8111),a(116),a(2892),a(6099),{class:"trial-subbranch-picker"});const s={__name:"TrialSubbranchPicker",props:{modelValue:{type:[String,Number],default:""},editable:{type:Boolean,default:!0},isAdmin:{type:Boolean,default:!1}},emits:["update:modelValue"],setup:function(e,t){var a=t.emit,l=e,n=a,u=(0,r.KR)(!1),o=(0,r.KR)([{text:"否",value:"0"},{text:"一期",value:"1"},{text:"二期",value:"2"}]),s=function(e){var t=o.value.find(function(t){return String(t.value)===String(e)});return t?t.text:""},v=(0,i.EW)(function(){return s(l.modelValue)}),p=(0,i.EW)(function(){var e=o.value.findIndex(function(e){return String(e.value)===String(l.modelValue)});return e>=0?e:0}),f=function(){l.editable&&l.isAdmin&&(u.value=!0)},m=function(e){var t=e.selectedOptions,a=t&&t[0];a&&void 0!==a.value&&n("update:modelValue",a.value),u.value=!1},b=function(){u.value=!1};return function(t,a){var l=(0,i.g2)("van-picker"),n=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",d,[(0,i.bF)(c.A,{label:"试点中支",type:"select",disabled:!e.editable||!e.isAdmin,placeholder:"请选择","show-divider":!1,value:v.value,onSelectClick:f},null,8,["disabled","value"]),(0,i.bF)(n,{show:u.value,"onUpdate:show":a[0]||(a[0]=function(e){return u.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:o.value,onConfirm:m,onCancel:b,"default-index":p.value,title:"选择试点中支"},null,8,["columns","default-index"])]}),_:1},8,["show"])])}}};var v=a(1241);const p=(0,v.A)(s,[["__scopeId","data-v-20aab525"]]),f=p;a(2062),a(1701),a(6031);var m=a(715),b={class:"branch-subbranch-picker"};const h={__name:"BranchSubbranchPicker",props:{branchCode:{type:String,default:""},subbranchCode:{type:String,default:""},editable:{type:Boolean,default:!0}},emits:["update:branchCode","update:subbranchCode","branch-selected"],setup:function(e,t){var a=t.emit,u=e,o=a,d=(0,r.KR)(!1),s=(0,r.KR)(!1),v=(0,r.KR)([]),p=(0,r.KR)([]),f=(0,r.KR)([]),h=(0,i.EW)(function(){if(!u.branchCode)return"";var e=v.value.find(function(e){return e.value===u.branchCode});return e?e.text:u.branchCode}),A=(0,i.EW)(function(){if(!u.subbranchCode)return"";var e=f.value.find(function(e){return e.value===u.subbranchCode});return e?e.text:u.subbranchCode});(0,i.wB)(function(){return u.branchCode},function(e,t){console.log("BranchSubbranchPicker - 分公司代码变化:",{oldVal:t,newVal:e}),!e&&t?(console.log("BranchSubbranchPicker - 分公司被清空，清空中支选项"),f.value=[]):e&&e!==t&&(console.log("BranchSubbranchPicker - 分公司发生变化，重新加载中支选项"),x(e))});var g=function(){u.editable&&((0,m.D0)({message:"加载分公司数据...",forbidClick:!0}),N().then(function(){(0,m.cQ)(),d.value=!0})["catch"](function(e){(0,m.cQ)(),(0,m.xr)("加载失败，请重试"),console.error("Failed to load branch data:",e)}))},C=function(){u.editable&&(s.value=!0)},y=function(e){var t=e.selectedOptions,a=t[0];console.log("BranchSubbranchPicker - 分公司选择确认:",a),a&&a.text?(console.log("BranchSubbranchPicker - 更新分公司代码:",a.value),o("update:branchCode",a.value),console.log("BranchSubbranchPicker - 清空中支值"),o("update:subbranchCode",""),console.log("BranchSubbranchPicker - 重新加载中支选项"),x(a.value),console.log("BranchSubbranchPicker - 发出branch-selected事件:",a),o("branch-selected",a)):console.log("BranchSubbranchPicker - 没有选择分公司"),d.value=!1},V=function(){d.value=!1},w=function(e){var t=e.selectedOptions,a=t[0];a&&a.text&&o("update:subbranchCode",a.value),s.value=!1},k=function(){s.value=!1},N=function(){var e=(0,n.A)((0,l.A)().m(function e(){return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:return e.a(2,new Promise(function(e){setTimeout(function(){p.value=[{branchCode:"1",branchName:"北京分公司",id:"01",itemList:[{id:"0101",subbranchCode:"10",subbranchName:"北京本部"}]},{branchCode:"2",branchName:"湖北分公司",id:"02",itemList:[{id:"0201",subbranchCode:"10",subbranchName:"武汉本部"},{id:"0211",subbranchCode:"20",subbranchName:"宜昌中心支公司"},{id:"0212",subbranchCode:"30",subbranchName:"襄阳中心支公司"},{id:"0213",subbranchCode:"50",subbranchName:"十堰中心支公司"},{id:"0214",subbranchCode:"60",subbranchName:"黄石中心支公司"},{id:"0215",subbranchCode:"40",subbranchName:"荆州中心支公司"},{id:"0216",subbranchCode:"70",subbranchName:"荆门中心支公司"},{id:"0217",subbranchCode:"A0",subbranchName:"黄冈中心支公司"},{id:"0218",subbranchCode:"80",subbranchName:"孝感中心支公司"},{id:"0219",subbranchCode:"90",subbranchName:"咸宁中心支公司"},{id:"0220",subbranchCode:"D0",subbranchName:"恩施中心支公司"},{id:"0221",subbranchCode:"C0",subbranchName:"鄂州中心支公司"},{id:"0222",subbranchCode:"G0",subbranchName:"天门中心支公司"},{id:"0223",subbranchCode:"F0",subbranchName:"仙桃中心支公司"},{id:"0224",subbranchCode:"B0",subbranchName:"随州中心支公司"},{id:"0225",subbranchCode:"K0",subbranchName:"武汉本部业务管理二部"},{id:"0226",subbranchCode:"J0",subbranchName:"武汉本部业务管理三部"},{id:"0227",subbranchCode:"E0",subbranchName:"潜江中心支公司"}]}],v.value=p.value.map(function(e){return{text:e.branchName,value:e.id}}),e()},300)}))}},e)}));return function(){return e.apply(this,arguments)}}(),x=function(e){console.log("BranchSubbranchPicker - 加载中支选项，分公司代码:",e);var t=p.value.find(function(t){return t.id===e});console.log("BranchSubbranchPicker - 找到的分公司数据:",t),t&&t.itemList?(console.log("BranchSubbranchPicker - 中支列表:",t.itemList),f.value=t.itemList.map(function(e){return{text:e.subbranchName,value:e.id}}),console.log("BranchSubbranchPicker - 处理后的中支选项:",f.value)):(console.log("BranchSubbranchPicker - 未找到分公司或中支列表为空"),f.value=[])};return function(t,a){var l=(0,i.g2)("van-picker"),n=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(c.A,{name:"branchCode",rules:[{required:!0,message:"请选择分公司"}],label:"分公司",required:!0,type:"select","model-value":h.value,placeholder:e.editable?"请选择":h.value,disabled:!e.editable,options:v.value,onSelectClick:g},null,8,["model-value","placeholder","disabled","options"]),(0,i.bF)(c.A,{name:"subbranchCode",rules:[{required:!0,message:"请选择中支"}],label:"中支",required:!0,type:"select","model-value":A.value,placeholder:e.editable?"请选择":A.value,disabled:!e.editable,options:f.value,onSelectClick:C},null,8,["model-value","placeholder","disabled","options"]),(0,i.bF)(n,{show:d.value,"onUpdate:show":a[0]||(a[0]=function(e){return d.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:v.value,onConfirm:y,onCancel:V,"default-index":0,title:"选择分公司"},null,8,["columns"])]}),_:1},8,["show"]),(0,i.bF)(n,{show:s.value,"onUpdate:show":a[1]||(a[1]=function(e){return s.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:f.value,onConfirm:w,onCancel:k,"default-index":0,title:"选择中支"},null,8,["columns"])]}),_:1},8,["show"])])}}},A=(0,v.A)(h,[["__scopeId","data-v-1d2c7c64"]]),g=A;var C={class:"strategy-picker"};const y={__name:"StrategyPicker",props:{modelValue:{type:String,default:""},editable:{type:Boolean,default:!0},branchCode:{type:String,default:""}},emits:["update:modelValue"],setup:function(e,t){var a=t.emit,u=e,o=a,d=(0,r.KR)(!1),s=(0,r.KR)([]);function v(e){return p.apply(this,arguments)}function p(){return p=(0,n.A)((0,l.A)().m(function e(t){var a;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:return console.log("StrategyPicker - 获取战略选项，分公司代码:",t),a={"01":[{text:"北京A战略",value:"A1"},{text:"北京B战略",value:"B1"}],"02":[{text:"湖北A战略",value:"A2"},{text:"湖北B战略",value:"B2"},{text:"湖北C战略",value:"C2"}]},e.n=1,new Promise(function(e){return setTimeout(e,200)});case 1:t&&a[t]?(s.value=a[t],console.log("StrategyPicker - 加载的战略选项:",s.value)):(s.value=[],console.log("StrategyPicker - 未找到对应分公司的战略选项"));case 2:return e.a(2)}},e)})),p.apply(this,arguments)}(0,i.wB)(function(){return u.branchCode},function(e,t){console.log("StrategyPicker - 分公司代码变化:",{oldVal:t,newVal:e}),e&&e!==t?(o("update:modelValue",""),v(e)):!e&&t&&(console.log("StrategyPicker - 分公司被清空，清空战略选项"),s.value=[],o("update:modelValue",""))},{immediate:!0}),(0,i.sV)(function(){u.branchCode&&v(u.branchCode)});var f=(0,i.EW)(function(){var e=s.value.find(function(e){return e.value===u.modelValue});return e?e.text:""}),m=(0,i.EW)(function(){var e=s.value.findIndex(function(e){return e.value===u.modelValue});return e>=0?e:0}),b=function(){u.editable&&(d.value=!0)},h=function(e){var t=e.selectedOptions,a=t&&t[0];a&&o("update:modelValue",a.value),d.value=!1},A=function(){d.value=!1};return function(t,a){var l=(0,i.g2)("van-picker"),n=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",C,[(0,i.bF)(c.A,{label:"战略划分",required:!0,type:"select",placeholder:e.editable?"请选择":f.value,disabled:!e.editable,value:f.value,onSelectClick:b},null,8,["placeholder","disabled","value"]),(0,i.bF)(n,{show:d.value,"onUpdate:show":a[0]||(a[0]=function(e){return d.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:s.value,onConfirm:h,onCancel:A,"default-index":m.value,title:"选择战略划分"},null,8,["columns","default-index"])]}),_:1},8,["show"])])}}},V=(0,v.A)(y,[["__scopeId","data-v-d8f41460"]]),w=V;var k=a(4119),N=(a(8706),a(5086),a(3609),a(3579),a(2762),{class:"hospital-search-picker"});const x={__name:"HospitalSearchPicker",props:{hospitalName:{type:String,default:""},hospitalLevel:{type:String,default:""},feHospitalId:{type:String,default:""},disableHospitalLevel:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},emits:["update:hospitalName","update:hospitalLevel","update:feHospitalId","update:disableHospitalLevel"],setup:function(e,t){var a=t.emit,u=e,o=a,d=(0,r.KR)(!1),s=(0,r.KR)(!1),v=(0,r.KR)([]),p=(0,r.KR)([]),f=(0,r.KR)([]),b=(0,r.KR)(null),h=(0,i.EW)({get:function(){return u.hospitalName},set:function(e){return o("update:hospitalName",e)}}),A=(0,i.EW)({get:function(){return u.hospitalLevel},set:function(e){return o("update:hospitalLevel",e)}}),g=(0,i.EW)({get:function(){return u.feHospitalId},set:function(e){return o("update:feHospitalId",e)}}),C=(0,i.EW)({get:function(){return u.disableHospitalLevel},set:function(e){return o("update:disableHospitalLevel",e)}}),y=(0,i.EW)(function(){var e=v.value.find(function(e){return e.value===u.hospitalLevel});return e?e.text:""}),V=(0,i.EW)(function(){var e=v.value.findIndex(function(e){return e.value===u.hospitalLevel});return e>=0?e:0}),w=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t;return(0,l.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(u.editable){e.n=1;break}return e.a(2);case 1:if(e.p=1,0!==v.value.length){e.n=3;break}return(0,m.D0)({message:"加载医院级别数据...",forbidClick:!0}),e.n=2,_();case 2:(0,m.cQ)();case 3:d.value=!0,e.n=5;break;case 4:e.p=4,t=e.v,(0,m.cQ)(),(0,m.xr)("加载医院级别数据失败"),console.error("Failed to load hospital level options:",t);case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),x=function(e){var t;if(e&&e.selectedOptions&&e.selectedOptions[0])t=e.selectedOptions[0];else if(e&&e.value)t=e.value;else{if(!e||!e.text)return console.error("无法解析医院级别选择结果:",e),void(d.value=!1);t=e}t&&t.text&&(A.value=t.value),d.value=!1},E=function(){d.value=!1},L=function(){var e=(0,n.A)((0,l.A)().m(function e(t){var a;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:if(a=t&&"object"===(0,k.A)(t)&&t.target?String(t.target.value||"").trim():t&&"object"===(0,k.A)(t)&&t.detail?String(t.detail||"").trim():String(t||"").trim(),b.value&&clearTimeout(b.value),a){e.n=1;break}return p.value=[],e.a(2);case 1:b.value=setTimeout((0,n.A)((0,l.A)().m(function e(){return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,S(a);case 1:return e.a(2)}},e)})),500);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,n.A)((0,l.A)().m(function e(t){var a,n,u,o,i,r;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:try{(0,m.D0)({message:"搜索医院中...",forbidClick:!0}),a=[{hospitalName:"".concat(t,"分院"),hospitalLevel:"2a",feHospitalId:"H002",isCustom:!1},{hospitalName:"".concat(t,"总院"),hospitalLevel:"3a",feHospitalId:"H003",isCustom:!1},{hospitalName:"".concat(t,"人民医院"),hospitalLevel:"3a",feHospitalId:"H004",isCustom:!1}],n=a.find(function(e){return e.hospitalName.toLowerCase()===t.toLowerCase()}),u=[].concat(a),n||u.unshift({hospitalName:t,hospitalLevel:"",feHospitalId:"",isCustom:!0}),o=200,i=u,200===o&&i&&(f.value=i,r=i.map(function(e){return{text:e.hospitalName,value:e.feHospitalId}}),I(r)),(0,m.cQ)()}catch(l){(0,m.cQ)(),(0,m.xr)("搜索医院失败"),console.error("Failed to search hospital:",l)}case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(e){p.value=e,s.value=!0},F=function(e){var t;if(e&&e.selectedOptions&&e.selectedOptions[0])t=e.selectedOptions[0];else if(e&&e.value)t=e.value;else{if(!e||!e.text)return console.error("无法解析选择结果:",e),void(s.value=!1);t=e}if(t){var a=f.value.find(function(e){return e.feHospitalId===t.value});a?(h.value=a.hospitalName,A.value=a.hospitalLevel||"",g.value=a.feHospitalId||"",U(a.isCustom)):console.error("未找到对应的医院数据:",t)}s.value=!1},B=function(){s.value=!1},R=function(){console.log("=== 医院搜索结果选择器打开 ===")},U=function(e){C.value=!e},_=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t,a,n;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:try{t=[{catId:"hospitalLevel",catName:"医院等级",dictCd:"10",dictName:"一级"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"1a",dictName:"一级甲等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"1b",dictName:"一级乙等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"1c",dictName:"一级丙等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"20",dictName:"二级"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"2a",dictName:"二级甲等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"2b",dictName:"二级乙等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"2c",dictName:"二级丙等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"30",dictName:"三级"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"3a",dictName:"三级甲等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"3b",dictName:"三级乙等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"3c",dictName:"三级丙等"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"00",dictName:"其他"},{catId:"hospitalLevel",catName:"医院等级",dictCd:"3d",dictName:"三级特等"}],a=200,n=t,200===a&&n&&(v.value=n.map(function(e){return{text:e.dictName,value:e.dictCd}}))}catch(l){console.error("Failed to query hospital level:",l),(0,m.xr)("获取医院级别列表失败")}case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return(0,i.wB)(function(){return u.hospitalName},function(e,t){e===t||p.value.some(function(t){return t.text===e})||(C.value=!1)}),(0,i.hi)(function(){b.value&&clearTimeout(b.value)}),function(t,a){var l=(0,i.g2)("van-picker"),n=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",N,[(0,i.bF)(c.A,{label:"医院名称",required:!0,type:"input",modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return h.value=e}),placeholder:"请输入医院名称搜索",disabled:!e.editable,onInput:L},null,8,["modelValue","disabled"]),(0,i.bF)(c.A,{label:"医院级别",required:!0,type:"select",placeholder:e.editable?"请选择":y.value,disabled:!e.editable||C.value,value:y.value,onSelectClick:w},null,8,["placeholder","disabled","value"]),(0,i.bF)(c.A,{label:"医院fe编码",type:"input",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return g.value=e}),placeholder:"请输入医院fe编码",disabled:!0},null,8,["modelValue"]),(0,i.bF)(n,{show:d.value,"onUpdate:show":a[2]||(a[2]=function(e){return d.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:v.value,onConfirm:x,onCancel:E,"default-index":V.value,title:"选择医院级别"},null,8,["columns","default-index"])]}),_:1},8,["show"]),(0,i.bF)(n,{show:s.value,"onUpdate:show":a[3]||(a[3]=function(e){return s.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:p.value,onConfirm:F,onCancel:B,"default-index":0,title:"选择医院",onOpen:R},null,8,["columns"])]}),_:1},8,["show"])])}}},E=(0,v.A)(x,[["__scopeId","data-v-8afaa44a"]]),L=E;var S=a(9258),I=(a(2008),a(1629),a(4423),a(2489),a(7588),a(6033),a(7764),a(3500),a(2953),{class:"venue-section"});const F={__name:"VenueSection",props:{activeVenue:{type:String,default:""},activeLocation:{type:String,default:""},hospitalName:{type:String,default:""},hospitalLevel:{type:String,default:""},feHospitalId:{type:String,default:""},disableHospitalLevel:{type:Boolean,default:!1},centerName:{type:String,default:""},activeVenueDetail:{type:String,default:""},communityName:{type:String,default:""},category:{type:String,default:""},healthRelate:{type:String,default:""},editable:{type:Boolean,default:!0}},emits:["update:activeVenue","update:activeLocation","update:hospitalName","update:hospitalLevel","update:feHospitalId","update:disableHospitalLevel","update:centerName","update:activeVenueDetail","update:communityName"],setup:function(e,t){var a=t.emit,u=e,o=a,d=(0,r.KR)(!1),s=(0,r.KR)(!1),v=(0,r.KR)([]),p=(0,r.KR)([]),f=(0,r.KR)([]),b=(0,r.KR)([]),h=(0,r.KR)([]),A=(0,r.KR)([]),g={activeVenueNameArr1:["HEALTH_HOSP","WEALTH_CENTER","COMMUNITY","BYBO"],activeVenueNameArr2:["WEALTH_CENTER","COMMUNITY","BYBO"],activeVenueNameArr3:["WORK_PLACE","HOTEL","OTHER"]},C=(0,i.EW)({get:function(){return u.activeVenue},set:function(e){return o("update:activeVenue",e)}}),y=(0,i.EW)({get:function(){return u.activeLocation},set:function(e){return o("update:activeLocation",e)}}),V=(0,i.EW)({get:function(){return u.hospitalName},set:function(e){return o("update:hospitalName",e)}}),w=(0,i.EW)({get:function(){return u.hospitalLevel},set:function(e){return o("update:hospitalLevel",e)}}),k=(0,i.EW)({get:function(){return u.feHospitalId},set:function(e){return o("update:feHospitalId",e)}}),N=(0,i.EW)({get:function(){return u.disableHospitalLevel},set:function(e){return o("update:disableHospitalLevel",e)}}),x=(0,i.EW)({get:function(){return u.centerName},set:function(e){return o("update:centerName",e)}}),E=(0,i.EW)({get:function(){return u.activeVenueDetail},set:function(e){return o("update:activeVenueDetail",e)}}),F=(0,i.EW)({get:function(){return u.communityName},set:function(e){return o("update:communityName",e)}}),B=(0,i.EW)(function(){var e=f.value.find(function(e){return e.value===u.activeVenue});return e?e.text:""}),R=(0,i.EW)(function(){var e=p.value.find(function(e){return e.value===u.activeLocation});return e?e.text:""}),U=(0,i.EW)(function(){var e=v.value.findIndex(function(e){return e.value===u.activeVenue});return e>=0?e:0}),_=(0,i.EW)(function(){var e=p.value.findIndex(function(e){return e.value===u.activeLocation});return e>=0?e:0}),T=(0,i.EW)(function(){return"HEALTH_HOSP"===u.activeVenue}),H=(0,i.EW)(function(){return"WEALTH_CENTER"===u.activeVenue}),O=(0,i.EW)(function(){var e=["COMMUNITY","BYBO","WORK_PLACE","HOTEL","OTHER"];return e.includes(u.activeVenue)}),W=(0,i.EW)(function(){return"COMMUNITY"===u.activeVenue}),P=function(){u.editable&&J()},q=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t;return(0,l.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(u.editable){e.n=1;break}return e.a(2);case 1:if(e.p=1,0!==p.value.length){e.n=3;break}return(0,m.D0)({message:"加载活动位置数据...",forbidClick:!0}),e.n=2,z();case 2:(0,m.cQ)();case 3:s.value=!0,e.n=5;break;case 4:e.p=4,t=e.v,(0,m.cQ)(),(0,m.xr)("加载活动位置数据失败"),console.error("Failed to load active location options:",t);case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=e.selectedOptions,a=t&&t[0];if(a){C.value=a.value,"HEALTH_HOSP"!==a.value&&Y(),"WEALTH_CENTER"!==a.value&&M();var l=["COMMUNITY","BYBO","WORK_PLACE","HOTEL","OTHER"];l.includes(a.value)||j(),"COMMUNITY"!==a.value&&G(),d.value=!1}else d.value=!1},D=function(){d.value=!1},X=function(e){var t=e.selectedOptions,a=t&&t[0];a&&a.text&&(y.value=a.value),s.value=!1},Q=function(){s.value=!1},Y=function(){y.value="",V.value="",w.value="",k.value="",N.value=!1},M=function(){x.value=""},j=function(){E.value=""},G=function(){F.value=""},$=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t,a,n,u,o;return(0,l.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,new Promise(function(e){return setTimeout(e,300)});case 1:t=[{dictName:"健保通医院",dictCd:"HEALTH_HOSP"},{dictName:"健财中心",dictCd:"WEALTH_CENTER"},{dictName:"养老社区",dictCd:"COMMUNITY"},{dictName:"拜博",dictCd:"BYBO"},{dictName:"职场",dictCd:"WORK_PLACE"},{dictName:"酒店",dictCd:"HOTEL"},{dictName:"其他",dictCd:"OTHER"}],a=200,n=t,200===a&&n&&(f.value=n.map(function(e){return{text:e.dictName,value:e.dictCd}}),u=new Map,f.value.forEach(function(e){return u.set(e.value,e)}),b.value=g.activeVenueNameArr1.map(function(e){var t=u.get(e);return t||null}).filter(Boolean),h.value=g.activeVenueNameArr2.map(function(e){var t=u.get(e);return t||null}).filter(Boolean),A.value=g.activeVenueNameArr3.map(function(e){var t=u.get(e);return t||null}).filter(Boolean)),e.n=3;break;case 2:e.p=2,o=e.v,console.error("Failed to query active venue:",o),(0,m.xr)("获取活动场地列表失败");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t,a,n;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:try{t=[{catId:"activeLocation",catName:"活动位置",dictCd:"1",dictName:"院内"},{catId:"activeLocation",catName:"活动位置",dictCd:"2",dictName:"驿站"},{catId:"activeLocation",catName:"活动位置",dictCd:"3",dictName:"VIP室"}],a=200,n=t,200===a&&n&&(p.value=n.map(function(e){return{text:e.dictName,value:e.dictCd}}))}catch(l){console.error("Failed to query active location:",l),(0,m.xr)("获取活动位置列表失败")}case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t,a,n;return(0,l.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(e.p=0,(0,m.D0)({message:"加载活动场地选项...",forbidClick:!0}),t=u.category,a=u.healthRelate,0!==f.value.length){e.n=1;break}return e.n=1,$();case 1:v.value="1"===t?"1"===a?(0,S.A)(b.value):"0"===a?(0,S.A)(h.value):[]:"2"===t?(0,S.A)(A.value):[],(0,m.cQ)(),d.value=!0,e.n=3;break;case 2:e.p=2,n=e.v,(0,m.cQ)(),(0,m.xr)("加载活动场地选项失败"),console.error("Failed to load venue options:",n);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return(0,i.wB)(function(){return u.activeVenue},function(e,t){e!==t&&"HEALTH_HOSP"!==e&&Y(),e!==t&&"WEALTH_CENTER"!==e&&M();var a=["COMMUNITY","BYBO","WORK_PLACE","HOTEL","OTHER"];e===t||a.includes(e)||j(),e!==t&&"COMMUNITY"!==e&&G()}),(0,i.sV)(function(){$()}),function(t,a){var l=(0,i.g2)("van-picker"),n=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",I,[(0,i.bF)(c.A,{label:"活动场地",required:!0,type:"select",placeholder:e.editable?"请选择":B.value,disabled:!e.editable,value:B.value,onSelectClick:P},null,8,["placeholder","disabled","value"]),T.value?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(c.A,{label:"活动位置",required:!0,type:"select",placeholder:e.editable?"请选择":R.value,disabled:!e.editable,value:R.value,onSelectClick:q},null,8,["placeholder","disabled","value"]),(0,i.bF)(L,{hospitalName:V.value,"onUpdate:hospitalName":a[0]||(a[0]=function(e){return V.value=e}),hospitalLevel:w.value,"onUpdate:hospitalLevel":a[1]||(a[1]=function(e){return w.value=e}),feHospitalId:k.value,"onUpdate:feHospitalId":a[2]||(a[2]=function(e){return k.value=e}),disableHospitalLevel:N.value,"onUpdate:disableHospitalLevel":a[3]||(a[3]=function(e){return N.value=e}),editable:e.editable},null,8,["hospitalName","hospitalLevel","feHospitalId","disableHospitalLevel","editable"])],64)):(0,i.Q3)("",!0),H.value?((0,i.uX)(),(0,i.Wv)(c.A,{key:1,label:"场馆名称",type:"input",modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=function(e){return x.value=e}),placeholder:"请输入场馆名称",disabled:!e.editable},null,8,["modelValue","disabled"])):(0,i.Q3)("",!0),O.value?((0,i.uX)(),(0,i.Wv)(c.A,{key:2,label:"场地信息",type:"textarea",modelValue:E.value,"onUpdate:modelValue":a[5]||(a[5]=function(e){return E.value=e}),placeholder:"请输入场地信息",rows:3,disabled:!e.editable},null,8,["modelValue","disabled"])):(0,i.Q3)("",!0),W.value?((0,i.uX)(),(0,i.Wv)(c.A,{key:3,label:"社区名称",type:"input",modelValue:F.value,"onUpdate:modelValue":a[6]||(a[6]=function(e){return F.value=e}),placeholder:"请输入社区名称",disabled:!e.editable},null,8,["modelValue","disabled"])):(0,i.Q3)("",!0),(0,i.bF)(n,{show:d.value,"onUpdate:show":a[7]||(a[7]=function(e){return d.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:v.value,onConfirm:K,onCancel:D,"default-index":U.value,title:"选择活动场地"},null,8,["columns","default-index"])]}),_:1},8,["show"]),(0,i.bF)(n,{show:s.value,"onUpdate:show":a[8]||(a[8]=function(e){return s.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{columns:p.value,onConfirm:X,onCancel:Q,"default-index":_.value,title:"选择活动位置"},null,8,["columns","default-index"])]}),_:1},8,["show"])])}}},B=(0,v.A)(F,[["__scopeId","data-v-ef8c505a"]]),R=B;a(3288),a(8940),a(8156);var U={class:"datetime-range-picker"};const _={__name:"DateTimeRangePicker",props:{startTime:{type:String,default:""},endTime:{type:String,default:""},editable:{type:Boolean,default:!0}},emits:["update:startTime","update:endTime"],setup:function(e,t){var a=t.emit,o=e,d=a,s=(0,r.KR)(!1),v=(0,r.KR)(!1),p=(0,r.KR)([]),f=(0,r.KR)([]),m=(0,r.KR)([0,0]),b=(0,r.KR)([0,0]),h=(0,i.EW)({get:function(){return o.startTime},set:function(e){return d("update:startTime",e)}}),A=(0,i.EW)({get:function(){return o.endTime},set:function(e){return d("update:endTime",e)}}),g=function(e){return String(e).padStart(2,"0")},C=function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(g(e.getMonth()+1),"-").concat(g(e.getDate()))},y=function(e){var t=(e||"").split(" "),a=(0,u.A)(t,2),l=a[0],n=a[1],o=(l||C()).split("-"),i=(0,u.A)(o,3),r=i[0],c=i[1],d=i[2],s=(n||"00:00").split(":"),v=(0,u.A)(s,2),p=v[0],f=v[1];return{d:[parseInt(r,10),parseInt(c,10),parseInt(d,10)],t:[parseInt(p,10),parseInt(f,10)]}},V=function(e,t){var a=parseInt(e[0],10),l=parseInt(e[1],10)-1,n=parseInt(e[2],10),u=parseInt(t[0],10),o=parseInt(t[1],10);return new Date(a,l,n,u,o,0,0)},w=function(e){var t=e||"",a=o.startTime||"";if(!t||!a)return!0;var l=y(a),n=l.d,u=l.t,i=y(t),r=i.d,c=i.t,d=V(n,u),s=V(r,c);return s.getTime()>d.getTime()||"结束时间需晚于开始时间"},k=function(e){var t=e||"",a=o.endTime||"";if(!t||!a)return!0;var l=y(t),n=l.d,u=l.t,i=y(a),r=i.d,c=i.t,d=V(n,u),s=V(r,c);return d.getTime()<s.getTime()||"开始时间需早于结束时间"},N=function(){o.editable&&(s.value=!0)},x=function(){o.editable&&(v.value=!0)},E=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t,a,n,u;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:return t="".concat(p.value[0],"-").concat(g(p.value[1]),"-").concat(g(p.value[2])),a=g(m.value[0]),n=g(m.value[1]),u="".concat(t," ").concat(a,":").concat(n),h.value=u,e.n=1,(0,i.dY)();case 1:d("validate-field","endTime"),s.value=!1;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),L=function(){s.value=!1},S=function(){var e=(0,n.A)((0,l.A)().m(function e(){var t,a,n,u;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:return t="".concat(f.value[0],"-").concat(g(f.value[1]),"-").concat(g(f.value[2])),a=g(b.value[0]),n=g(b.value[1]),u="".concat(t," ").concat(a,":").concat(n),A.value=u,e.n=1,(0,i.dY)();case 1:d("validate-field","startTime"),v.value=!1;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),I=function(){v.value=!1};return(0,i.sV)(function(){if(o.startTime){var e=y(o.startTime),t=e.t;m.value=t}if(o.endTime){var a=y(o.endTime),l=a.t;b.value=l}}),(0,i.wB)(function(){return o.startTime},function(e){if(e){var t=y(e),a=t.t;m.value=a}}),(0,i.wB)(function(){return o.endTime},function(e){if(e){var t=y(e),a=t.t;b.value=a}}),function(t,a){var l=(0,i.g2)("van-date-picker"),n=(0,i.g2)("van-time-picker"),u=(0,i.g2)("van-picker-group"),o=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",U,[(0,i.bF)(c.A,{label:"活动开始时间",name:"startTime",required:!0,type:"select",placeholder:e.editable?"请选择":h.value,disabled:!e.editable,rules:[{required:!0,message:"请选择开始时间"},{validator:k}],value:h.value,onSelectClick:N},null,8,["placeholder","disabled","rules","value"]),(0,i.bF)(c.A,{label:"活动结束时间",name:"endTime",required:!0,type:"select",placeholder:e.editable?"请选择":A.value,disabled:!e.editable,rules:[{required:!0,message:"请选择结束时间"},{validator:w}],value:A.value,onSelectClick:x},null,8,["placeholder","disabled","rules","value"]),(0,i.bF)(o,{show:s.value,"onUpdate:show":a[2]||(a[2]=function(e){return s.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{title:"选择开始时间",tabs:["选择日期","选择时间"],onConfirm:E,onCancel:L},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return p.value=e}),"columns-type":["year","month","day"]},null,8,["modelValue"]),(0,i.bF)(n,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return m.value=e}),"columns-type":["hour","minute"]},null,8,["modelValue"])]}),_:1})]}),_:1},8,["show"]),(0,i.bF)(o,{show:v.value,"onUpdate:show":a[5]||(a[5]=function(e){return v.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{title:"选择结束时间",tabs:["选择日期","选择时间"],onConfirm:S,onCancel:I},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=function(e){return f.value=e}),"columns-type":["year","month","day"]},null,8,["modelValue"]),(0,i.bF)(n,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=function(e){return b.value=e}),"columns-type":["hour","minute"]},null,8,["modelValue"])]}),_:1})]}),_:1},8,["show"])])}}},T=(0,v.A)(_,[["__scopeId","data-v-7435003b"]]),H=T;Boolean;var O={class:"health-relate-picker"};const W={__name:"HealthRelatePicker",props:{modelValue:{type:String,default:""},editable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup:function(e,t){var a=t.expose,l=t.emit,n=e,u=l,o=(0,r.KR)(!1),c=(0,r.KR)([{text:"否",value:"0"},{text:"是",value:"1"}]),d=function(){n.editable&&(o.value=!0)},s=function(e){var t=e.selectedOptions,a=t[0];a&&a.text&&u("update:modelValue",a.value),o.value=!1},v=function(){o.value=!1};return a({showPicker:d}),function(e,t){var a=(0,i.g2)("van-picker"),l=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",O,[(0,i.bF)(l,{show:o.value,"onUpdate:show":t[0]||(t[0]=function(e){return o.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(a,{columns:c.value,onConfirm:s,onCancel:v,"default-index":0,title:"选择是否健保通相关"},null,8,["columns"])]}),_:1},8,["show"])])}}},P=(0,v.A)(W,[["__scopeId","data-v-0266145c"]]),q=P;Boolean;var K={class:"category-picker"};const D={__name:"CategoryPicker",props:{modelValue:{type:String,default:""},editable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup:function(e,t){var a=t.expose,l=t.emit,n=e,u=l,o=(0,r.KR)(!1),c=(0,r.KR)([{text:"超体场景",value:"1"},{text:"服务行销",value:"2"}]),d=function(){n.editable&&(o.value=!0)},s=function(e){var t=e.selectedOptions,a=t[0];a&&a.text&&u("update:modelValue",a.value),o.value=!1},v=function(){o.value=!1};return a({showPicker:d}),function(e,t){var a=(0,i.g2)("van-picker"),l=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.CE)("div",K,[(0,i.bF)(l,{show:o.value,"onUpdate:show":t[0]||(t[0]=function(e){return o.value=e}),position:"bottom",round:""},{default:(0,i.k6)(function(){return[(0,i.bF)(a,{columns:c.value,onConfirm:s,onCancel:v,"default-index":0,title:"选择活动类别"},null,8,["columns"])]}),_:1},8,["show"])])}}},X=(0,v.A)(D,[["__scopeId","data-v-4395402c"]]),Q=X;var Y={class:"activity-basic-form"},M={key:0,class:"section-header"},j={class:"section-body"},G={class:"form-section"};const $={__name:"ActivityBasicForm",props:{formData:{type:Object,required:!0},editable:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showExtendedFields:{type:Boolean,default:!0},locationConfig:{type:Object,default:function(){return{type:"select",placeholder:"请选择",disabled:!1}}},isAdmin:{type:Boolean,default:!1}},emits:["update:formData","form-change","branch-selected","branch-changed","branch-cleared"],setup:function(e,t){var a=t.expose,d=t.emit,s=(0,r.KR)(null),v=(0,r.KR)(null),p=(0,r.KR)(null),m=e,b=d,h=(0,r.KR)((0,o.A)({},m.formData));void 0===h.value._disableHospitalLevel&&(h.value._disableHospitalLevel=!1);var A=(0,i.EW)(function(){return m.locationConfig.type||"select"}),C=(0,i.EW)(function(){return m.editable?m.locationConfig.placeholder||"请选择":h.value.location}),y=(0,i.EW)(function(){return!m.editable||m.locationConfig.disabled}),V=(0,r.KR)(!1);(0,i.wB)(function(){return m.formData},function(e){V.value=!0,h.value=(0,o.A)({},e),void 0===h.value._disableHospitalLevel&&(h.value._disableHospitalLevel=!1),(0,i.dY)(function(){V.value=!1})},{deep:!0}),(0,i.wB)(h,function(e){V.value||(b("update:formData",e),b("form-change",e))},{deep:!0}),(0,i.wB)(function(){return m.editable},function(e){e&&(h.value=(0,o.A)({},m.formData))}),(0,i.wB)([function(){return h.value.category},function(){return h.value.healthRelate}],function(e,t){var a=(0,u.A)(e,2),l=a[0],n=a[1],o=(0,u.A)(t,2),i=o[0],r=o[1];l===i&&n===r||(h.value.activeVenue="")});var k=function(){h.value=(0,o.A)({},m.formData)},N=function(){return h.value},x=function(){var e=(0,n.A)((0,l.A)().m(function e(t){var a;return(0,l.A)().w(function(e){while(1)switch(e.p=e.n){case 0:if(null===(a=s.value)||void 0===a||!a.validate){e.n=4;break}return e.p=1,e.n=2,s.value.validate(t);case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e;m.editable&&(null===(e=v.value)||void 0===e||e.showPicker())},L=function(){var e;m.editable&&(null===(e=p.value)||void 0===e||e.showPicker())},S=function(e){console.log("ActivityBasicForm - 分公司已选择:",e),console.log("ActivityBasicForm - 分公司数据详情:",{text:e.text,value:e.value,branchCode:h.value.branchCode,subbranchCode:h.value.subbranchCode}),b("branch-selected",e)},I=function(e){console.log("ActivityBasicForm - 分公司已变更，代码:",e),b("branch-changed",e)},F=function(){console.log("ActivityBasicForm - 分公司已清空"),b("branch-cleared")},B=function(){m.editable&&console.log("Show channel picker")},U=function(){m.editable&&console.log("Show location picker")},_=function(){m.editable&&console.log("Show content picker")},T=function(){m.editable&&console.log("Show method picker")},O=function(){m.editable&&console.log("Show QR code picker")},W=function(){m.editable&&console.log("Show public release picker")},P=function(){m.editable&&console.log("Show traditional medicine picker")};return a({resetForm:k,getFormData:N,validate:function(){var e,t;return null===(e=s.value)||void 0===e||null===(t=e.validate)||void 0===t?void 0:t.call(e)}}),function(t,a){var l=(0,i.g2)("van-form");return(0,i.uX)(),(0,i.CE)("div",Y,[e.showHeader?((0,i.uX)(),(0,i.CE)("div",M,a[30]||(a[30]=[(0,i.Lk)("span",{class:"section-title"},"活动基本信息",-1),(0,i.Lk)("span",{class:"section-reminder"},"所有在医院（无论是否健保通医院）举办的活动，活动分类需选择超体场景，活动场地选择健保通医院；对于医护群体开展的活动，活动内容请录入医院圈层相关",-1),(0,i.Lk)("div",{class:"header-divider"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",j,[(0,i.bF)(l,{ref_key:"formRef",ref:s,"show-error":!0,"show-error-message":!0,"scroll-to-error":!0},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",G,[(0,i.bF)(g,{branchCode:h.value.branchCode,"onUpdate:branchCode":a[0]||(a[0]=function(e){return h.value.branchCode=e}),subbranchCode:h.value.subbranchCode,"onUpdate:subbranchCode":a[1]||(a[1]=function(e){return h.value.subbranchCode=e}),editable:e.editable,onBranchSelected:S,onBranchChanged:I,onBranchCleared:F},null,8,["branchCode","subbranchCode","editable"]),(0,i.bF)(w,{modelValue:h.value.strategy,"onUpdate:modelValue":a[2]||(a[2]=function(e){return h.value.strategy=e}),editable:e.editable,"branch-code":h.value.branchCode},null,8,["modelValue","editable","branch-code"]),(0,i.bF)(c.A,{label:"活动名称",required:!0,type:"textarea",modelValue:h.value.name,"onUpdate:modelValue":a[3]||(a[3]=function(e){return h.value.name=e}),placeholder:"请输入活动名称","max-length":30,disabled:!e.editable,rows:2,name:"name"},null,8,["modelValue","disabled"]),(0,i.bF)(c.A,{label:"活动渠道",required:!0,type:"select",modelValue:h.value.channel,"onUpdate:modelValue":a[4]||(a[4]=function(e){return h.value.channel=e}),placeholder:e.editable?"请选择":h.value.channel,disabled:!e.editable,onSelectClick:B},null,8,["modelValue","placeholder","disabled"]),(0,i.bF)(H,{startTime:h.value.startTime,"onUpdate:startTime":a[5]||(a[5]=function(e){return h.value.startTime=e}),endTime:h.value.endTime,"onUpdate:endTime":a[6]||(a[6]=function(e){return h.value.endTime=e}),editable:e.editable,onValidateField:x},null,8,["startTime","endTime","editable"]),(0,i.bF)(c.A,{label:"活动类别",required:!0,type:"select",modelValue:h.value.category,"onUpdate:modelValue":a[7]||(a[7]=function(e){return h.value.category=e}),placeholder:e.editable?"请选择":h.value.category,disabled:!e.editable,onSelectClick:E},null,8,["modelValue","placeholder","disabled"]),(0,i.bF)(c.A,{label:"是否健保通相关",required:!0,type:"select",modelValue:h.value.healthRelate,"onUpdate:modelValue":a[8]||(a[8]=function(e){return h.value.healthRelate=e}),placeholder:e.editable?"请选择":h.value.healthRelate,disabled:!e.editable,onSelectClick:L},null,8,["modelValue","placeholder","disabled"]),(0,i.bF)(R,{activeVenue:h.value.activeVenue,"onUpdate:activeVenue":a[9]||(a[9]=function(e){return h.value.activeVenue=e}),activeLocation:h.value.activeLocation,"onUpdate:activeLocation":a[10]||(a[10]=function(e){return h.value.activeLocation=e}),hospitalName:h.value.hospitalName,"onUpdate:hospitalName":a[11]||(a[11]=function(e){return h.value.hospitalName=e}),hospitalLevel:h.value.hospitalLevel,"onUpdate:hospitalLevel":a[12]||(a[12]=function(e){return h.value.hospitalLevel=e}),feHospitalId:h.value.feHospitalId,"onUpdate:feHospitalId":a[13]||(a[13]=function(e){return h.value.feHospitalId=e}),disableHospitalLevel:h.value._disableHospitalLevel,"onUpdate:disableHospitalLevel":a[14]||(a[14]=function(e){return h.value._disableHospitalLevel=e}),centerName:h.value.centerName,"onUpdate:centerName":a[15]||(a[15]=function(e){return h.value.centerName=e}),activeVenueDetail:h.value.activeVenueDetail,"onUpdate:activeVenueDetail":a[16]||(a[16]=function(e){return h.value.activeVenueDetail=e}),communityName:h.value.communityName,"onUpdate:communityName":a[17]||(a[17]=function(e){return h.value.communityName=e}),category:h.value.category,healthRelate:h.value.healthRelate,editable:e.editable},null,8,["activeVenue","activeLocation","hospitalName","hospitalLevel","feHospitalId","disableHospitalLevel","centerName","activeVenueDetail","communityName","category","healthRelate","editable"]),(0,i.bF)(c.A,{label:"活动省市",required:!0,type:A.value,modelValue:h.value.location,"onUpdate:modelValue":a[18]||(a[18]=function(e){return h.value.location=e}),placeholder:C.value,disabled:y.value,onSelectClick:U},null,8,["type","modelValue","placeholder","disabled"]),e.showExtendedFields?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(c.A,{label:"详细地址",required:!0,type:"textarea",modelValue:h.value.detailAddress,"onUpdate:modelValue":a[19]||(a[19]=function(e){return h.value.detailAddress=e}),placeholder:"请输入","max-length":300,rows:3,name:"detailAddress"},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"活动内容",required:!0,type:"select",modelValue:h.value.content,"onUpdate:modelValue":a[20]||(a[20]=function(e){return h.value.content=e}),placeholder:"健康讲座",onSelectClick:_},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"活动方式",required:!0,type:"select",modelValue:h.value.method,"onUpdate:modelValue":a[21]||(a[21]=function(e){return h.value.method=e}),placeholder:"请选择",onSelectClick:T},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"是否生成签到二维码",required:!0,type:"select",modelValue:h.value.generateQRCode,"onUpdate:modelValue":a[22]||(a[22]=function(e){return h.value.generateQRCode=e}),placeholder:"请选择",onSelectClick:O},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"活动说明",type:"textarea",modelValue:h.value.description,"onUpdate:modelValue":a[23]||(a[23]=function(e){return h.value.description=e}),placeholder:"请输入","max-length":30,rows:2},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"直播链接",type:"input",modelValue:h.value.liveLink,"onUpdate:modelValue":a[24]||(a[24]=function(e){return h.value.liveLink=e}),placeholder:"请输入","show-divider":!1},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"是否对外发布",required:!0,type:"select",modelValue:h.value.publicRelease,"onUpdate:modelValue":a[25]||(a[25]=function(e){return h.value.publicRelease=e}),placeholder:"请选择",onSelectClick:W},null,8,["modelValue"]),(0,i.bF)(c.A,{label:"活是否包含中医特色服务",required:!0,"label-width":"200px",type:"select",modelValue:h.value.traditionalMedicine,"onUpdate:modelValue":a[26]||(a[26]=function(e){return h.value.traditionalMedicine=e}),placeholder:"请选择",onSelectClick:P,"show-divider":!1},null,8,["modelValue"]),(0,i.bF)(f,{modelValue:h.value.trialSubbranch,"onUpdate:modelValue":a[27]||(a[27]=function(e){return h.value.trialSubbranch=e}),editable:e.editable,"is-admin":e.isAdmin},null,8,["modelValue","editable","is-admin"])],64)):(0,i.Q3)("",!0)])]}),_:1},512)]),(0,i.bF)(Q,{ref_key:"categoryPickerRef",ref:v,modelValue:h.value.category,"onUpdate:modelValue":a[28]||(a[28]=function(e){return h.value.category=e}),editable:e.editable},null,8,["modelValue","editable"]),(0,i.bF)(q,{ref_key:"healthRelatePickerRef",ref:p,modelValue:h.value.healthRelate,"onUpdate:modelValue":a[29]||(a[29]=function(e){return h.value.healthRelate=e}),editable:e.editable},null,8,["modelValue","editable"])])}}},z=(0,v.A)($,[["__scopeId","data-v-587d9582"]]),J=z},8156:(e,t,a)=>{var l=a(6518),n=a(533).start,u=a(3063);l({target:"String",proto:!0,forced:u},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},8653:(e,t,a)=>{a.d(t,{A:()=>u});a(2675),a(2008),a(1629),a(4114),a(8111),a(2489),a(7588),a(7945),a(4185),a(3851),a(1278),a(9432),a(6099),a(3500);var l=a(1391);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){(0,l.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}}}]);
//# sourceMappingURL=544.e97ba68a.js.map