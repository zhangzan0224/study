"use strict";(self["webpackChunkmsnp_h5"]=self["webpackChunkmsnp_h5"]||[]).push([[209],{2557:(e,a,t)=>{e.exports=t.p+"img/empty-state.182cf522.png"},5692:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Ne});var i=t(6768),s={class:"activity-detail-page"},n={class:"tab-content-container"},l={key:0,class:"tab-content"},d={key:1,class:"tab-content"},o={key:2,class:"tab-content"};function c(e,a,t,c,r,u){var v=(0,i.g2)("NavigationBar"),p=(0,i.g2)("TabsBar"),m=(0,i.g2)("ActivityInfo"),f=(0,i.g2)("FeedbackForm"),h=(0,i.g2)("AuditRecord");return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(v,{title:"活动详情",onBack:u.handleBack},null,8,["onBack"]),(0,i.bF)(p,{items:r.tabItems,"active-status":r.activeTab,onStatusChange:u.handleTabChange},null,8,["items","active-status","onStatusChange"]),(0,i.Lk)("div",n,["info"===r.activeTab?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(m,{activity:r.activity,editable:r.infoEditable,onEdit:u.handleEditInfo,onSave:u.handleSaveInfo},null,8,["activity","editable","onEdit","onSave"])])):"feedback"===r.activeTab?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.bF)(f,{activity:r.activity,onSubmit:u.handleFeedbackSubmit},null,8,["activity","onSubmit"])])):"audit"===r.activeTab?((0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(h,{activity:r.activity},null,8,["activity"])])):(0,i.Q3)("",!0)])])}var r=t(8653),u=t(1002),v=t(9020),p=t(908),m=t(388),f=(t(4346),t(4114),t(4554),t(9089),t(144)),h=t(715),g=t(5472),b=t(5048),k={class:"activity-info"},A={key:0,class:"expert-info-section"},y={key:0,class:"add-expert-wrapper"},x={key:1,class:"action-buttons"};const L={__name:"ActivityInfo",props:{activity:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["cancel","save"],setup:function(e,a){var t=a.emit,s=e,n=t,l=(0,f.KR)(null),d=(0,f.KR)((0,r.A)({},s.activity)),o=(0,f.KR)({type:"select",placeholder:"请选择",disabled:!1}),c=(0,f.KR)(!0),u=(0,i.EW)(function(){var e=d.value.content;return"健康讲座"===e||"义诊"===e});(0,i.wB)(function(){return s.activity},function(e){d.value=(0,r.A)({},e),!u.value||d.value.experts&&0!==d.value.experts.length||F()},{deep:!0}),(0,i.wB)(function(){return s.editable},function(e){e&&(d.value=(0,r.A)({},s.activity),!u.value||d.value.experts&&0!==d.value.experts.length||F())}),(0,i.sV)(function(){!u.value||d.value.experts&&0!==d.value.experts.length||F()});var v=function(e){console.log("分公司已选择:",e),(0,h.GF)("已选择分公司: ".concat(e.text)),d.value.department="",S(e.value)},L=function(e){console.log("分公司已变更，代码:",e)},C=function(){console.log("分公司已清空"),d.value.department=""},S=function(){var e=(0,m.A)((0,p.A)().m(function e(a){return(0,p.A)().w(function(e){while(1)switch(e.n){case 0:try{console.log("正在加载分公司 ".concat(a," 下的中支数据..."))}catch(t){console.error("加载中支数据失败:",t),(0,h.xr)("加载中支数据失败")}case 1:return e.a(2)}},e)}));return function(a){return e.apply(this,arguments)}}(),F=function(){d.value.experts||(d.value.experts=[]),0===d.value.experts.length&&d.value.experts.push({id:1,photo:"",name:"",title:"",hospital:"",department:"",introduction:""})},w=function(){d.value.experts||(d.value.experts=[]);var e={id:Date.now(),photo:"",name:"",title:"",hospital:"",department:"",introduction:""};d.value.experts.push(e)},E=function(e,a){d.value.experts&&d.value.experts[e]&&(d.value.experts[e]=(0,r.A)((0,r.A)({},d.value.experts[e]),a))},D=function(e){d.value.experts&&d.value.experts.length>1&&d.value.experts.splice(e,1)},V=function(){d.value=(0,r.A)({},s.activity),n("cancel")},I=function(){var e=(0,m.A)((0,p.A)().m(function e(){var a,t,i,s;return(0,p.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,null===(a=l.value)||void 0===a||null===(t=a.validate)||void 0===t?void 0:t.call(a);case 1:e.n=3;break;case 2:return e.p=2,s=e.v,i=Array.isArray(s)?s[0]:null,i&&i.message&&(0,h.xr)(i.message),e.a(2);case 3:n("save",d.value);case 4:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return function(a,t){return(0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(g.A,{ref_key:"activityBasicFormRef",ref:l,formData:d.value,"onUpdate:formData":t[0]||(t[0]=function(e){return d.value=e}),editable:e.editable,"show-header":!0,"show-extended-fields":!0,"location-config":o.value,"is-admin":c.value,onBranchSelected:v,onBranchChanged:L,onBranchCleared:C},null,8,["formData","editable","location-config","is-admin"]),u.value?((0,i.uX)(),(0,i.CE)("div",A,[t[1]||(t[1]=(0,i.Lk)("div",{class:"section-header"},[(0,i.Lk)("span",{class:"section-title"},"讲师信息"),(0,i.Lk)("div",{class:"header-divider"})],-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.value.experts,function(a,t){return(0,i.uX)(),(0,i.CE)("div",{key:t,class:"expert-section"},[(0,i.bF)(b.A,{expert:a,index:t,onUpdate:E,onRemove:D,"show-remove":e.editable&&d.value.experts&&d.value.experts.length>1},null,8,["expert","index","show-remove"])])}),128)),e.editable?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("span",{class:"add-expert-text",onClick:w},"+ 继续添加讲师")])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),e.editable?((0,i.uX)(),(0,i.CE)("div",x,[(0,i.Lk)("button",{class:"btn btn-cancel",onClick:V}," 取消 "),(0,i.Lk)("button",{class:"btn btn-save",onClick:I}," 保存 ")])):(0,i.Q3)("",!0)])}}};var C=t(1241);const S=(0,C.A)(L,[["__scopeId","data-v-e8703296"]]),F=S;t(2010);var w=t(4232),E=t(7648),D={class:"feedback-form"},V={class:"activity-header-card"},I={class:"activity-title"},B={class:"data-section"},X={class:"signing-section"},_={class:"signing-options"},R={class:"evaluation-section"},q={class:"section-body"},T={class:"evaluation-items"},U={class:"evaluation-item"},z={class:"evaluation-item"},Q={class:"evaluation-item"},M={class:"evaluation-item"},N={class:"total-score"},K={class:"score-value"},j={class:"file-section"},$={class:"section-body"},G={class:"action-buttons"};function O(e,a,t,s,n,l){var d=(0,i.g2)("StarRating"),o=(0,i.g2)("FileUploader");return(0,i.uX)(),(0,i.CE)("div",D,[(0,i.Lk)("div",V,[a[9]||(a[9]=(0,i.Lk)("div",{class:"gradient-bar"},null,-1)),(0,i.Lk)("h3",I,(0,w.v_)(t.activity.name),1),a[10]||(a[10]=(0,i.Fv)('<div class="stats-section" data-v-6d1e44e0><div class="main-stat" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>62</span><span class="stat-label" data-v-6d1e44e0>签到反馈总人数</span></div><div class="sub-stats" data-v-6d1e44e0><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>36</span><span class="stat-label" data-v-6d1e44e0>签到客户人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>12</span><span class="stat-label" data-v-6d1e44e0>签到代理人人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>27</span><span class="stat-label" data-v-6d1e44e0>反馈客户人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>10</span><span class="stat-label" data-v-6d1e44e0>反馈代理人人数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>16</span><span class="stat-label" data-v-6d1e44e0>签到反馈客户总数</span></div><div class="stat-item" data-v-6d1e44e0><span class="stat-number" data-v-6d1e44e0>5</span><span class="stat-label" data-v-6d1e44e0>签到反馈代理人总数</span></div></div></div>',1))]),(0,i.Lk)("div",B,[a[12]||(a[12]=(0,i.Fv)('<div class="section-header" data-v-6d1e44e0><div class="section-title-group" data-v-6d1e44e0><span class="section-title" data-v-6d1e44e0>活动数据</span><span class="section-subtitle" data-v-6d1e44e0>数据将用于统计分析,请务必准确提供</span></div></div><div class="data-form" data-v-6d1e44e0><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><span class="item-label" data-v-6d1e44e0>报名人数(人)</span><span class="item-value" data-v-6d1e44e0>108</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><span class="item-label" data-v-6d1e44e0>现场实际客户人数(人)</span><span class="item-value placeholder" data-v-6d1e44e0>请输入</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><span class="item-label" data-v-6d1e44e0>现场实际代理人人数(人)</span><span class="item-value placeholder" data-v-6d1e44e0>请输入</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><div class="item-label-group" data-v-6d1e44e0><span class="required-asterisk" data-v-6d1e44e0>*</span><span class="item-label" data-v-6d1e44e0>现上参与人数(人)</span></div><span class="item-value" data-v-6d1e44e0>48</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><div class="item-label-group" data-v-6d1e44e0><span class="required-asterisk" data-v-6d1e44e0>*</span><span class="item-label" data-v-6d1e44e0>该活动是否录入其他系统</span></div><div class="select-group" data-v-6d1e44e0><span class="item-value placeholder" data-v-6d1e44e0>请选择</span><img src="'+E+'" alt="" class="select-icon" data-v-6d1e44e0></div></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="item-row" data-v-6d1e44e0><div class="item-label-group" data-v-6d1e44e0><span class="required-asterisk" data-v-6d1e44e0>*</span><span class="item-label" data-v-6d1e44e0>活动费用(元)</span></div><span class="item-value placeholder" data-v-6d1e44e0>请输入</span></div><div class="item-divider" data-v-6d1e44e0></div></div><div class="form-item" data-v-6d1e44e0><div class="textarea-field" data-v-6d1e44e0><span class="textarea-label" data-v-6d1e44e0>活动费用用途</span><div class="textarea-container" data-v-6d1e44e0><div class="textarea-content" data-v-6d1e44e0><span class="textarea-placeholder" data-v-6d1e44e0>请输入</span></div><div class="char-count" data-v-6d1e44e0>0/300</div></div></div><div class="item-divider" data-v-6d1e44e0></div></div></div>',2)),(0,i.Lk)("div",X,[a[11]||(a[11]=(0,i.Lk)("div",{class:"signing-label"},[(0,i.Lk)("span",{class:"required-mark"},"*"),(0,i.Lk)("span",{class:"label-text"},"是否现场签单")],-1)),(0,i.Lk)("div",_,[(0,i.Lk)("button",{class:(0,w.C4)(["option-btn",{active:!0===n.formData.onSiteSigning}]),onClick:a[0]||(a[0]=function(e){return n.formData.onSiteSigning=!0})}," 是 ",2),(0,i.Lk)("button",{class:(0,w.C4)(["option-btn",{active:!1===n.formData.onSiteSigning}]),onClick:a[1]||(a[1]=function(e){return n.formData.onSiteSigning=!1})}," 否 ",2)])])]),(0,i.Lk)("div",R,[a[19]||(a[19]=(0,i.Lk)("div",{class:"section-header"},[(0,i.Lk)("div",{class:"section-title-group"},[(0,i.Lk)("span",{class:"section-title"},"活动评价"),(0,i.Lk)("span",{class:"section-subtitle"},"1-5分从差到优排序")])],-1)),(0,i.Lk)("div",q,[(0,i.Lk)("div",T,[(0,i.Lk)("div",U,[a[13]||(a[13]=(0,i.Lk)("div",{class:"evaluation-question"},[(0,i.Lk)("span",{class:"required-mark"},"*"),(0,i.Lk)("span",{class:"question-text"},"讲座内容设置是否符合听众的健康需求:")],-1)),(0,i.bF)(d,{modelValue:n.formData.evaluation.contentSuitability,"onUpdate:modelValue":a[2]||(a[2]=function(e){return n.formData.evaluation.contentSuitability=e})},null,8,["modelValue"])]),(0,i.Lk)("div",z,[a[14]||(a[14]=(0,i.Lk)("div",{class:"evaluation-question"},[(0,i.Lk)("span",{class:"required-mark"},"*"),(0,i.Lk)("span",{class:"question-text"},"专家演讲方式是否有效调动现场气氛:")],-1)),(0,i.bF)(d,{modelValue:n.formData.evaluation.presentationEffectiveness,"onUpdate:modelValue":a[3]||(a[3]=function(e){return n.formData.evaluation.presentationEffectiveness=e})},null,8,["modelValue"])]),(0,i.Lk)("div",Q,[a[15]||(a[15]=(0,i.Lk)("div",{class:"evaluation-question"},[(0,i.Lk)("span",{class:"required-mark"},"*"),(0,i.Lk)("span",{class:"question-text"},"讲座内容是否符合主办单位的业务需求:")],-1)),(0,i.bF)(d,{modelValue:n.formData.evaluation.businessNeedAlignment,"onUpdate:modelValue":a[4]||(a[4]=function(e){return n.formData.evaluation.businessNeedAlignment=e})},null,8,["modelValue"])]),(0,i.Lk)("div",M,[a[16]||(a[16]=(0,i.Lk)("div",{class:"evaluation-question"},[(0,i.Lk)("span",{class:"required-mark"},"*"),(0,i.Lk)("span",{class:"question-text"},"专家演讲方式是否符合主办单位的预期:")],-1)),(0,i.bF)(d,{modelValue:n.formData.evaluation.expectationAlignment,"onUpdate:modelValue":a[5]||(a[5]=function(e){return n.formData.evaluation.expectationAlignment=e})},null,8,["modelValue"])]),(0,i.Lk)("div",N,[a[17]||(a[17]=(0,i.Lk)("span",{class:"score-label"},"活动总分",-1)),(0,i.Lk)("span",K,(0,w.v_)(l.totalScore)+" 分",1)]),a[18]||(a[18]=(0,i.Fv)('<div class="suggestion-field" data-v-6d1e44e0><span class="suggestion-label" data-v-6d1e44e0>其他意见或建议</span><div class="textarea-container" data-v-6d1e44e0><div class="textarea-content" data-v-6d1e44e0><span class="textarea-placeholder" data-v-6d1e44e0>希望可以多多举办活动</span></div><div class="char-count" data-v-6d1e44e0>10/300</div></div></div>',1))])])]),(0,i.Lk)("div",j,[a[20]||(a[20]=(0,i.Lk)("div",{class:"section-header"},[(0,i.Lk)("div",{class:"section-title-group"},[(0,i.Lk)("span",{class:"section-title"},"活动文件"),(0,i.Lk)("span",{class:"section-subtitle"},[(0,i.eW)(" 最多可上传10个文件,单个非视频文件不能超过20M;"),(0,i.Lk)("br"),(0,i.eW)(" 单个视频文件不能超过500M ")])])],-1)),(0,i.Lk)("div",$,[(0,i.bF)(o,{modelValue:e.uploadedFiles,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.uploadedFiles=a}),"max-count":10,"max-file-size":20,"max-video-size":500,onChange:l.handleFileChange,onUploadSuccess:l.handleFileUploadSuccess,onUploadError:l.handleFileUploadError,onDelete:l.handleFileDelete,onDownload:l.handleFileDownload},null,8,["modelValue","onChange","onUploadSuccess","onUploadError","onDelete","onDownload"])])]),a[21]||(a[21]=(0,i.Fv)('<div class="report-section" data-v-6d1e44e0><div class="section-header" data-v-6d1e44e0><div class="section-title-group" data-v-6d1e44e0><span class="section-title" data-v-6d1e44e0>活动报道</span><span class="section-subtitle" data-v-6d1e44e0>非必填,未来拟对外发布</span></div><button class="ai-btn" data-v-6d1e44e0> AI生成报道 </button></div><div class="section-body" data-v-6d1e44e0><div class="report-field" data-v-6d1e44e0><div class="textarea-container" data-v-6d1e44e0><div class="textarea-content" data-v-6d1e44e0><span class="textarea-placeholder" data-v-6d1e44e0>请点击&quot;AI生成报道&quot;按钮</span></div><div class="char-count" data-v-6d1e44e0>0/2000</div></div></div></div></div>',1)),(0,i.Lk)("div",G,[(0,i.Lk)("button",{class:"btn btn-save",onClick:a[7]||(a[7]=function(){return l.handleSave&&l.handleSave.apply(l,arguments)})}," 保存 "),(0,i.Lk)("button",{class:"btn btn-submit",onClick:a[8]||(a[8]=function(){return l.handleSubmit&&l.handleSubmit.apply(l,arguments)})}," 提交 ")])])}t(2712),t(9868),t(6099);var W=t(3141),H={class:"star-rating"},P={key:0,class:"score-text"};function Y(e,a,t,s,n,l){var d=(0,i.g2)("van-rate");return(0,i.uX)(),(0,i.CE)("div",H,[(0,i.bF)(d,{color:"#ffd21e","model-value":t.modelValue,"onUpdate:modelValue":l.handleRateChange,count:t.maxStars,disabled:t.disabled,size:25,gutter:4},null,8,["model-value","onUpdate:modelValue","count","disabled"]),t.showScore&&t.modelValue>0?((0,i.uX)(),(0,i.CE)("span",P,(0,w.v_)(t.modelValue)+"分",1)):(0,i.Q3)("",!0)])}t(2892);var Z=t(9955);const J={name:"StarRating",components:{"van-rate":Z.tt},props:{modelValue:{type:Number,default:0},maxStars:{type:Number,default:5},showScore:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},methods:{handleRateChange:function(e){this.$emit("update:modelValue",e),this.$emit("change",e)}}},ee=(0,C.A)(J,[["render",Y],["__scopeId","data-v-9ead5524"]]),ae=ee;var te={class:"file-uploader"},ie={key:0,class:"uploaded-files"},se={class:"file-header"},ne={class:"file-info"},le={class:"file-name"},de={class:"file-actions"},oe=["onClick"],ce=["onClick"],re={class:"file-details"},ue={class:"file-meta"},ve={class:"file-uploader"},pe={class:"file-tips"};function me(e,a,t,s,n,l){var d=(0,i.g2)("van-uploader");return(0,i.uX)(),(0,i.CE)("div",te,[n.uploadedFiles.length>0?((0,i.uX)(),(0,i.CE)("div",ie,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.uploadedFiles,function(e,t){return(0,i.uX)(),(0,i.CE)("div",{class:"file-item",key:t},[(0,i.Lk)("div",se,[(0,i.Lk)("div",ne,[(0,i.Lk)("div",{class:(0,w.C4)(["file-icon",l.getFileIconClass(e.type)])},null,2),(0,i.Lk)("span",le,(0,w.v_)(e.name),1)]),(0,i.Lk)("div",de,[((0,i.uX)(),(0,i.CE)("svg",{class:"action-icon download-icon",onClick:function(a){return l.downloadFile(e)},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a[1]||(a[1]=[(0,i.Lk)("path",{d:"M12 15L7 10H17L12 15Z",fill:"#666"},null,-1),(0,i.Lk)("path",{d:"M12 3V13",stroke:"#666","stroke-width":"2","stroke-linecap":"round"},null,-1),(0,i.Lk)("path",{d:"M3 17V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V17",stroke:"#666","stroke-width":"2","stroke-linecap":"round"},null,-1)]),8,oe)),((0,i.uX)(),(0,i.CE)("svg",{class:"action-icon delete-icon",onClick:function(e){return l.deleteFile(t)},viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a[2]||(a[2]=[(0,i.Lk)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"#ff4444","stroke-width":"2","stroke-linecap":"round"},null,-1)]),8,ce))])]),(0,i.Lk)("div",re,[(0,i.Lk)("span",ue,(0,w.v_)(e.size)+" "+(0,w.v_)(e.uploadTime),1),(0,i.Lk)("span",ve,"上传人："+(0,w.v_)(e.uploader),1)])])}),128))])):(0,i.Q3)("",!0),(0,i.bF)(d,{modelValue:n.fileList,"onUpdate:modelValue":a[0]||(a[0]=function(e){return n.fileList=e}),"max-count":t.maxCount,"max-size":1024*t.maxFileSize*1024,accept:t.acceptedTypes,"before-upload":l.beforeUpload,"after-read":l.afterRead,"upload-text":"+ 添加文件",class:"custom-uploader","show-upload":n.uploadedFiles.length<t.maxCount},{default:(0,i.k6)(function(){return a[3]||(a[3]=[(0,i.Lk)("div",{class:"upload-btn"},[(0,i.Lk)("span",{class:"upload-text"},"+ 添加文件")],-1)])}),_:1},8,["modelValue","max-count","max-size","accept","before-upload","after-read","show-upload"]),(0,i.Lk)("div",pe,(0,w.v_)(t.tipText),1)])}var fe=t(9258);t(8706),t(4423),t(3288),t(8459),t(7495),t(1699),t(8156),t(5440);const he={name:"FileUploader",props:{maxCount:{type:Number,default:10},value:{type:Array,default:function(){return[]}},acceptedTypes:{type:String,default:".pdf,.jpg,.jpeg,.png,.tif,.bmp,.doc,.docx,.xlsx,.xls,.mp4,.mov,.avi"},tipText:{type:String,default:"支持扩展名:pdf.jpg.jpeg.png.tif.bmp.doc.docx.xlsx.xls.mp4.mov.avi"},maxFileSize:{type:Number,default:20},maxVideoSize:{type:Number,default:500}},data:function(){return{fileList:[],uploadedFiles:(0,fe.A)(this.value)}},watch:{value:{handler:function(e){this.uploadedFiles=(0,fe.A)(e)},deep:!0},uploadedFiles:{handler:function(e){this.$emit("input",e),this.$emit("change",e)},deep:!0}},methods:{getFileIconClass:function(e){var a={pdf:"file-icon-pdf",doc:"file-icon-doc",docx:"file-icon-doc",xlsx:"file-icon-excel",xls:"file-icon-excel",jpg:"file-icon-image",jpeg:"file-icon-image",png:"file-icon-image",tif:"file-icon-image",bmp:"file-icon-image",mp4:"file-icon-video",mov:"file-icon-video",avi:"file-icon-video"};return a[e]||"file-icon-default"},beforeUpload:function(e){var a=e.name.split(".").pop().toLowerCase(),t=this.acceptedTypes.replace(/\./g,"").split(",");if(!t.includes(a))return this.$toast("不支持的文件格式"),!1;var i=["mp4","mov","avi"],s=i.includes(a)?1024*this.maxVideoSize*1024:1024*this.maxFileSize*1024;return e.size>s?(this.$toast(i.includes(a)?"视频文件不能超过".concat(this.maxVideoSize,"M"):"文件不能超过".concat(this.maxFileSize,"M")),!1):!(this.uploadedFiles.length>=this.maxCount)||(this.$toast("最多只能上传".concat(this.maxCount,"个文件")),!1)},afterRead:function(e){var a=this;return(0,m.A)((0,p.A)().m(function t(){var i;return(0,p.A)().w(function(t){while(1)switch(t.n){case 0:try{i={name:e.file.name,size:a.formatFileSize(e.file.size),uploadTime:a.formatDate(new Date),uploader:"当前用户",type:e.file.name.split(".").pop().toLowerCase(),url:e.content,id:Date.now()},a.uploadedFiles.push(i),a.fileList=[],a.$emit("upload-success",i)}catch(s){a.$toast("上传失败，请重试"),a.$emit("upload-error",s)}case 1:return t.a(2)}},t)}))()},downloadFile:function(e){e.url?window.open(e.url,"_blank"):this.$toast("文件链接不存在"),this.$emit("download",e)},deleteFile:function(e){var a=this;this.$dialog.confirm({title:"确认删除",message:"确定要删除这个文件吗？"}).then(function(){var t=a.uploadedFiles[e];a.uploadedFiles.splice(e,1),a.$emit("delete",t,e)})["catch"](function(){})},formatFileSize:function(e){if(0===e)return"0 B";var a=1024,t=["B","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,i)).toFixed(1))+t[i]},formatDate:function(e){var a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0");return"".concat(a,"-").concat(t,"-").concat(i," ").concat(s,":").concat(n,":").concat(l)},clearFiles:function(){this.uploadedFiles=[]},addFile:function(e){this.uploadedFiles.push(e)}}},ge=(0,C.A)(he,[["render",me],["__scopeId","data-v-7ab19916"]]),be=ge,ke={name:"FeedbackForm",components:{FormField:W.A,StarRating:ae,FileUploader:be},props:{activity:{type:Object,required:!0}},data:function(){return{formData:{registrationCount:108,actualCustomerCount:"",actualAgentCount:"",onlineParticipantCount:48,recordedInOtherSystem:"",activityCost:"",costPurpose:"",onSiteSigning:null,evaluation:{contentSuitability:5,presentationEffectiveness:0,businessNeedAlignment:0,expectationAlignment:0,suggestions:"希望可以多多举办活动"},report:""}}},computed:{totalScore:function(){var e=this.formData.evaluation,a=[e.contentSuitability,e.presentationEffectiveness,e.businessNeedAlignment,e.expectationAlignment],t=a.reduce(function(e,a){return e+a},0);return(t/4).toFixed(2)}},methods:{showSystemPicker:function(){console.log("Show system picker")},handleSave:function(){this.$emit("save",this.formData)},handleSubmit:function(){this.$emit("submit",this.formData)},handleFileChange:function(e){this.uploadedFiles=e},handleFileUploadSuccess:function(e){console.log("文件上传成功:",e)},handleFileUploadError:function(e){console.error("文件上传失败:",e)},handleFileDelete:function(e,a){console.log("文件删除:",e,a)},handleFileDownload:function(e){console.log("文件下载:",e)}}},Ae=(0,C.A)(ke,[["render",O],["__scopeId","data-v-6d1e44e0"]]),ye=Ae;var xe={class:"audit-record-page"},Le={class:"content"},Ce={class:"audit-records"},Se={class:"timeline"},Fe={key:0,class:"timeline-line"},we={class:"record-content"},Ee={class:"record-time"},De={class:"record-card"},Ve={class:"record-info"},Ie={class:"info-row"},Be={class:"value"},Xe={class:"info-row"},_e={class:"value"};function Re(e,a,t,s,n,l){var d=(0,i.g2)("EmptyState");return(0,i.uX)(),(0,i.CE)("div",xe,[(0,i.Lk)("div",Le,[(0,i.Lk)("div",Ce,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.auditRecords,function(e,t){return(0,i.uX)(),(0,i.CE)("div",{key:t,class:"audit-record-item"},[(0,i.Lk)("div",Se,[t<n.auditRecords.length-1?((0,i.uX)(),(0,i.CE)("div",Fe)):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,w.C4)(["timeline-dot",e.status])},null,2)]),(0,i.Lk)("div",we,[(0,i.Lk)("div",Ee,"审核时间："+(0,w.v_)(l.formatTime(e.time)),1),(0,i.Lk)("div",De,[(0,i.Lk)("div",Ve,[(0,i.Lk)("div",Ie,[a[0]||(a[0]=(0,i.Lk)("span",{class:"label"},"审核结论",-1)),(0,i.Lk)("span",Be,(0,w.v_)(e.conclusion),1)]),(0,i.Lk)("div",Xe,[a[1]||(a[1]=(0,i.Lk)("span",{class:"label"},"审核意见",-1)),(0,i.Lk)("span",_e,(0,w.v_)(e.comment||"无"),1)])]),(0,i.Lk)("div",{class:(0,w.C4)(["status-badge",e.status])},[(0,i.Lk)("span",null,(0,w.v_)(e.statusText),1)],2)])])])}),128))]),0===n.auditRecords.length?((0,i.uX)(),(0,i.Wv)(d,{key:0,text:"暂无审核记录"})):(0,i.Q3)("",!0)])])}var qe=t(7487);const Te={name:"AuditRecord",components:{EmptyState:qe.A},props:{activity:{type:Object,required:!0}},data:function(){return{auditRecords:[{round:1,status:"approved",statusText:"审核通过",time:"2025-01-01 14:00:00",auditor:"张三",conclusion:"审核通过",comment:"请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整请重新调整"},{round:2,status:"rejected",statusText:"审核不通过",time:"2025-01-01 14:00:00",auditor:"李四",conclusion:"审核不通过",comment:"请重新调整"}]}},mounted:function(){this.loadAuditRecords()},methods:{formatTime:function(e){if(!e)return"";var a=new Date(e);return a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-")},loadAuditRecords:function(){console.log("Loading audit records for activity:",this.activity.id)}}},Ue=(0,C.A)(Te,[["render",Re],["__scopeId","data-v-010fa4d4"]]),ze=Ue,Qe={name:"ActivityDetail",components:{NavigationBar:u.A,TabsBar:v.A,ActivityInfo:F,FeedbackForm:ye,AuditRecord:ze},data:function(){return{activeTab:"info",infoEditable:!1,tabItems:[{key:"info",label:"活动信息",count:""},{key:"feedback",label:"评价反馈",count:""},{key:"audit",label:"审核记录",count:""}],activity:{id:1,name:"活动名称活动名称活动名称",branch:"北京分公司",department:"北京本部",strategy:"高客战略",channel:"线上",startTime:"2025-01-02 08:00:00",endTime:"2025-01-02 12:00:00",category:"服务行销",healthInsurance:"否",venue:"职场",location:"北京市/北京市",status:"发布待审核"}}},mounted:function(){var e=this.$route.params.id;e&&this.loadActivityDetail(e)},methods:{handleBack:function(){this.$router.back()},handleTabChange:function(e){this.activeTab=e},handleEditInfo:function(){this.infoEditable=!0},handleSaveInfo:function(e){this.activity=(0,r.A)((0,r.A)({},this.activity),e),this.infoEditable=!1},handleFeedbackSubmit:function(e){console.log("Feedback submitted:",e)},loadActivityDetail:function(e){console.log("Loading activity detail for id:",e)}}},Me=(0,C.A)(Qe,[["render",c],["__scopeId","data-v-d893013e"]]),Ne=Me},7487:(e,a,t)=>{t.d(a,{A:()=>v});var i=t(6768),s=t(4232),n={class:"empty-state"},l=["src"],d={class:"empty-text"};function o(e,a,t,o,c,r){return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("img",{src:t.imageUrl,alt:"暂无内容",class:"empty-image"},null,8,l),(0,i.Lk)("span",d,(0,s.v_)(t.text),1)])}const c={name:"EmptyState",props:{text:{type:String,default:"暂无内容"},imageUrl:{type:String,default:t(2557)}}};var r=t(1241);const u=(0,r.A)(c,[["render",o],["__scopeId","data-v-7bb73e06"]]),v=u},7648:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEqADAAQAAAABAAAAEgAAAACaqbJVAAABU0lEQVQ4Eb2SvUrEQBDHL8mSRnuvv0ItLYNapMonKoqtz+E76GNcdVhIIN9FrhFrQQttRHwAU4n5MPE/HAsheGcS5AY2Ozsz+8vM7IxG6xTP8yZBEJyt+qe4ysl9oijuCIIwi6Louq5rgdub+6/GZgDXKSPAplhOWZYXpmlm3Ed7ZxAFI6N9ZORAfSyK4sS27Q+yk/QC0QXf97dRqg/1C5kZlmW9kb1TjyiQi2EYz5IkKTh/Msbu4zjeI1/vjDgwDMMN6DOsw6qqjgaDCJgkCcvzfApV6V0aAVpCjGpwRshmM8uyG4yDgtKOB4Fc1x2j4R4gWxgHU9f1B6mV5p9HvNIunn+OwG8sFZAXutSrR5hueqE73HuVZflA07R3gpB0BmGqz1FKjFKCNE01VVXTBWLx7dQjzIyNcAeQK2RxCWDdhJDO2oYl5yfYT9GP2yX+/zP/AP5KdOzWRoXFAAAAAElFTkSuQmCC"},9020:(e,a,t)=>{t.d(a,{A:()=>m});var i=t(6768),s=t(4232),n={class:"status-tabs"},l={class:"status-items"},d=["onClick"],o={class:"status-text"},c={key:0,class:"status-indicator"};function r(e,a,t,r,u,v){return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",l,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(v.statusItems,function(e,a){return(0,i.uX)(),(0,i.CE)("div",{key:a,class:(0,s.C4)(["status-item",{active:t.activeStatus===e.key}]),onClick:function(a){return v.handleStatusClick(e.key)}},[(0,i.Lk)("span",o,(0,s.v_)(e.label)+(0,s.v_)(e.count),1),t.activeStatus===e.key?((0,i.uX)(),(0,i.CE)("div",c)):(0,i.Q3)("",!0)],10,d)}),128))])])}const u={name:"TabsBar",props:{items:{type:Array,required:!0,default:function(){return[]}},activeStatus:{type:String,default:"all"}},computed:{statusItems:function(){return this.items}},methods:{handleStatusClick:function(e){this.$emit("status-change",e)}}};var v=t(1241);const p=(0,v.A)(u,[["render",r],["__scopeId","data-v-323a34f8"]]),m=p}}]);
//# sourceMappingURL=209.f9c26468.js.map