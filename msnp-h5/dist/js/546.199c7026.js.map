{"version":3,"file":"js/546.199c7026.js","mappings":"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","sources":["webpack://msnp-h5/./src/views/activity/NewActivity.vue","webpack://msnp-h5/./src/views/activity/NewActivity.vue?4ab9"],"sourcesContent":["<template>\n  <div class=\"page flex-col\">\n    <!-- 导航栏 -->\n    <!-- <div class=\"navigation-header flex-col\">\n      <div class=\"nav-bar flex-row justify-between\">\n        <img\n          class=\"back-icon\"\n          referrerpolicy=\"no-referrer\"\n          src=\"https://cds.taikang.com/mos/prod/11/wfile/SketchPngc63b350d0da0ec17cb082e7f3a6b7489befd9b4233606ede2948c2113e9e3d3f\"\n          @click=\"handleBack\"\n        />\n        <span class=\"nav-title\">新建活动</span>\n      </div>\n    </div> -->\n    <NavigationBar title=\"新建活动\" @back=\"handleBack\" />\n\n    <!-- 表单内容 -->\n    <div class=\"form-content\">\n      <!-- 活动基本信息 -->\n      <div class=\"form-section\">\n        <ActivityBasicForm ref=\"activityBasicFormRef\" v-model:formData=\"formData\" :editable=\"true\" :show-header=\"true\" :show-extended-fields=\"true\" @branch-selected=\"handleBranchSelected\" @branch-changed=\"handleBranchChanged\" @branch-cleared=\"handleBranchCleared\" />\n      </div>\n\n      <!-- 讲师信息 -->\n      <div v-if=\"shouldShowExpertInfo\" class=\"expert-form-section\">\n        <div class=\"section-header\">\n          <span class=\"section-title\">讲师信息</span>\n          <div class=\"header-divider\"></div>\n        </div>\n\n        <div v-for=\"(expert, index) in formData.experts\" :key=\"index\" class=\"expert-section\">\n          <ExpertForm :expert=\"expert\" :index=\"index\" @update=\"updateExpert\" @remove=\"removeExpert\" :show-remove=\"formData.experts.length > 1\" />\n        </div>\n\n        <div class=\"add-expert-wrapper\">\n          <span class=\"add-expert-text\" @click=\"addExpert\">+ 继续添加讲师</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 操作按钮 -->\n    <div class=\"action-buttons flex-row justify-between\">\n      <div class=\"btn-wrapper btn-save-wrapper\">\n        <span class=\"btn-text btn-save-text\" @click=\"handleSave\">保存</span>\n      </div>\n      <div class=\"btn-wrapper btn-submit-wrapper\">\n        <span class=\"btn-text btn-submit-text\" @click=\"handleSubmit\">提交</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showToast, showSuccessToast, showFailToast } from 'vant'\nimport NavigationBar from '@/components/base/NavigationBar.vue'\nimport ActivityBasicForm from '@/components/activity/ActivityBasicForm.vue'\nimport ExpertForm from '@/components/activity/ExpertForm.vue'\n\nconst router = useRouter()\n\n// 响应式数据\nconst activityBasicFormRef = ref(null)\nconst formData = ref({\n  branchCode: '',\n  subbracnCode: '',\n  strategy: '',\n  name: '',\n  channel: '',\n  startTime: '',\n  endTime: '',\n  category: '',\n  healthInsurance: '',\n  venue: '',\n  location: '',\n  detailAddress: '',\n  content: '健康讲座',\n  method: '',\n  generateQRCode: '',\n  description: '',\n  liveLink: '',\n  publicRelease: '',\n  traditionalMedicine: '',\n  experts: []\n})\n\n// 计算属性\nconst shouldShowExpertInfo = computed(() => {\n  // 根据活动内容判断是否需要显示讲师信息\n  const content = formData.value.content\n  return content === '健康讲座' || content === '义诊'\n})\n\n// 生命周期\nonMounted(() => {\n  // 初始化时如果需要显示讲师信息，则初始化 experts 数组\n  if (shouldShowExpertInfo.value && formData.value.experts.length === 0) {\n    initializeExperts()\n  }\n})\n\n// 方法\nconst handleBack = () => {\n  router.back()\n}\n\nconst handleFormChange = (newFormData) => {\n  formData.value = { ...formData.value, ...newFormData }\n  // 如果活动内容变化，需要检查是否需要初始化讲师信息\n  if (shouldShowExpertInfo.value && formData.value.experts.length === 0) {\n    initializeExperts()\n  }\n}\n\n// 分公司选择事件处理\nconst handleBranchSelected = (branchData) => {\n  console.log('分公司已选择:', branchData)\n  showSuccessToast(`已选择分公司: ${branchData.text}`)\n\n  // 可以在这里处理分公司选择后的逻辑\n  // 比如清空中支数据，因为分公司变了\n  formData.value.department = ''\n\n  // 可以触发加载该分公司下的中支数据\n  loadDepartmentsByBranch(branchData.value)\n}\n\n// 分公司变更事件处理\nconst handleBranchChanged = (branchCode) => {\n  console.log('分公司已变更，代码:', branchCode)\n  // 这里可以处理分公司变更后的逻辑\n  // 比如重新加载相关数据\n}\n\n// 分公司清空事件处理\nconst handleBranchCleared = () => {\n  console.log('分公司已清空')\n  // 清空中支数据\n  formData.value.department = ''\n}\n\n// 根据分公司加载中支数据\nconst loadDepartmentsByBranch = async (branchCode) => {\n  try {\n    // 这里可以调用API加载该分公司下的中支数据\n    console.log(`正在加载分公司 ${branchCode} 下的中支数据...`)\n\n    // 模拟API调用\n    // const response = await api.getDepartmentsByBranch(branchCode)\n    // 更新中支数据\n\n  } catch (error) {\n    console.error('加载中支数据失败:', error)\n    showFailToast('加载中支数据失败')\n  }\n}\n\n// 初始化讲师信息\nconst initializeExperts = () => {\n  if (formData.value.experts.length === 0) {\n    formData.value.experts.push({\n      id: 1,\n      photo: '',\n      name: '',\n      title: '',\n      hospital: '',\n      department: '',\n      introduction: ''\n    })\n  }\n}\n\n// 讲师管理\nconst addExpert = () => {\n  const newExpert = {\n    id: Date.now(),\n    photo: '',\n    name: '',\n    title: '',\n    hospital: '',\n    department: '',\n    introduction: ''\n  }\n  formData.value.experts.push(newExpert)\n}\n\nconst updateExpert = (index, expertData) => {\n  formData.value.experts[index] = { ...formData.value.experts[index], ...expertData }\n}\n\nconst removeExpert = (index) => {\n  if (formData.value.experts.length > 1) {\n    formData.value.experts.splice(index, 1)\n  }\n}\n\n// 表单提交\nconst handleSave = async () => {\n  try {\n    await activityBasicFormRef.value?.validate?.()\n  } catch (e) {\n    const first = Array.isArray(e) ? e[0] : null\n    if (first && first.message) showFailToast(first.message)\n    return\n  }\n  console.log('Save activity:', formData.value)\n  showSuccessToast('保存成功')\n}\n\nconst handleSubmit = async () => {\n  try {\n    await activityBasicFormRef.value?.validate?.()\n  } catch (e) {\n    const first = Array.isArray(e) ? e[0] : null\n    if (first && first.message) showFailToast(first.message)\n    return\n  }\n  console.log('Submit activity:', formData.value)\n  showSuccessToast('提交成功')\n}\n</script>\n\n<style scoped>\n/* 公共样式 */\n.flex-col {\n  display: flex;\n  flex-direction: column;\n}\n\n.flex-row {\n  display: flex;\n  flex-direction: row;\n}\n\n.justify-between {\n  justify-content: space-between;\n}\n\n/* 页面主容器 */\n.page {\n  background-color: rgba(241, 243, 246, 1);\n  position: relative;\n  min-height: 100vh;\n  overflow: hidden;\n  margin: 0 auto;\n  padding-bottom: 80px;\n}\n\n/* 导航栏样式 */\n.navigation-header {\n  background-color: rgba(255, 255, 255, 1);\n  padding: 14px 14px 0 0;\n}\n\n.nav-bar {\n  width: 224px;\n  margin: 12px 137px 0 0;\n}\n\n.back-icon {\n  width: 40px;\n  height: 44px;\n  cursor: pointer;\n}\n\n.nav-title {\n  overflow-wrap: break-word;\n  color: rgba(0, 0, 0, 0.9);\n  font-size: 18px;\n  font-family: PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  white-space: nowrap;\n  line-height: 18px;\n  margin-top: 13px;\n}\n\n/* 表单内容 */\n.form-content {\n  padding: 10px 10px 0 10px;\n}\n\n.form-section,\n.expert-form-section {\n  background-color: rgba(255, 255, 255, 1);\n  border-radius: 8px;\n  width: 100%;\n  align-self: center;\n  margin-bottom: 12px;\n  overflow: hidden;\n}\n\n.expert-form-section {\n  margin-top: 14px;\n  padding-bottom: 20px;\n}\n\n.section-header {\n  background: url(https://cds.taikang.com/mos/prod/11/wfile/SketchPnge4edf23d978dd525e4f6bc575b120e6159ead733da65916dbce7fcd01fd5140e)\n    100% no-repeat;\n  background-size: 100% 100%;\n  padding: 18px 15px 0 15px;\n}\n\n.section-body {\n  padding: 0 15px;\n}\n\n.section-title {\n  overflow-wrap: break-word;\n  color: rgba(51, 51, 51, 1);\n  font-size: 16px;\n  font-family: PingFangSC-Semibold;\n  font-weight: 600;\n  text-align: left;\n  white-space: nowrap;\n  line-height: 22px;\n  margin-right: 229px;\n}\n\n.header-divider {\n  background-color: rgba(242, 242, 242, 1);\n  width: 100%;\n  height: 1px;\n  margin-top: 17px;\n}\n\n/* 专家相关样式 */\n.expert-section {\n  border-bottom: 1px solid rgba(242, 242, 242, 1);\n  margin-bottom: 16px;\n}\n\n.expert-section:last-child {\n  border-bottom: none;\n  margin-bottom: 0;\n}\n\n.add-expert-wrapper {\n  border-radius: 4px;\n  border: 1px solid rgba(255, 129, 26, 1);\n  align-self: center;\n  /* width: 100%; */\n  box-sizing: border-box;\n  padding: 0 15px;\n  text-align: center;\n  padding: 8px 0;\n  margin: 0 15px;\n}\n\n.add-expert-text {\n  overflow-wrap: break-word;\n  color: rgba(255, 129, 26, 1);\n  font-size: 14px;\n  font-weight: normal;\n  text-align: center;\n  white-space: nowrap;\n  line-height: 20px;\n  cursor: pointer;\n}\n\n/* 操作按钮 */\n.action-buttons {\n  box-shadow: 0px -3px 4px 0px rgba(0, 0, 0, 0.05);\n  background-color: rgba(255, 255, 255, 1);\n  width: 375px;\n  position: fixed;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 15px 10px 15px 10px;\n}\n\n.btn-wrapper {\n  flex: 1;\n  margin: 0 5px;\n}\n\n.btn-save-wrapper {\n  background-color: rgba(255, 255, 255, 1);\n  border-radius: 40px;\n  border: 1px solid rgba(255, 129, 26, 1);\n  padding: 8px 71px 8px 69px;\n}\n\n.btn-submit-wrapper {\n  background: url(https://cds.taikang.com/mos/prod/11/wfile/SketchPng62abdbc7045770a0d1f896d0e1c3326a0d10ad342ec89ebca3bfbef110754d32)\n    100% no-repeat;\n  background-size: 100% 100%;\n  padding: 9px 71px 9px 71px;\n}\n\n.btn-text {\n  overflow-wrap: break-word;\n  font-size: 16px;\n  font-weight: normal;\n  text-align: center;\n  white-space: nowrap;\n  line-height: 22px;\n  cursor: pointer;\n}\n\n.btn-save-text {\n  color: rgba(255, 129, 26, 1);\n}\n\n.btn-submit-text {\n  color: rgba(255, 255, 255, 1);\n}\n\n.btn-wrapper:active {\n  opacity: 0.8;\n}\n</style>\n","import script from \"./NewActivity.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NewActivity.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NewActivity.vue?vue&type=style&index=0&id=1f4fb0bf&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1f4fb0bf\"]])\n\nexport default __exports__"],"names":["router","useRouter","activityBasicFormRef","ref","formData","branchCode","subbracnCode","strategy","name","channel","startTime","endTime","category","healthInsurance","venue","location","detailAddress","content","method","generateQRCode","description","liveLink","publicRelease","traditionalMedicine","experts","shouldShowExpertInfo","computed","value","onMounted","length","initializeExperts","handleBack","back","handleBranchSelected","branchData","console","log","showSuccessToast","text","department","loadDepartmentsByBranch","handleBranchChanged","handleBranchCleared","async","error","showFailToast","push","id","photo","title","hospital","introduction","addExpert","newExpert","Date","now","updateExpert","index","expertData","removeExpert","splice","handleSave","validate","e","first","Array","isArray","message","handleSubmit","_createElementBlock","_hoisted_1","_createVNode","NavigationBar","onBack","_createElementVNode","_hoisted_2","_hoisted_3","ActivityBasicForm","$event","editable","onBranchSelected","onBranchChanged","onBranchCleared","_hoisted_4","class","_Fragment","_renderList","expert","key","ExpertForm","onUpdate","onRemove","onClick","__exports__"],"sourceRoot":""}